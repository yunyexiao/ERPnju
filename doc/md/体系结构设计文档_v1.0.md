灯具进销存管理系统体系结构设计文档_v1.0
===
变更记录
---
|修改人员|日期|变更原因|版本号|
|:--|:--|:--|:--|
|钱美缘|2017.10.12|文档结构框架|v1.0|

目录
---

## 1 引言
### 1.1 编制目的
本报告详细完成对灯具进销存管理系统的概要设计，从而达到指导详细设计和开发的目的，同时实现和测试人员以及用户的沟通。  
本报告面向开发人员、测试人员和用户编写，是了解系统的导航  

### 1.2 词汇表
|词汇名称|词汇含义|备注|
|---|---|---|
|ERP|进销存管理系统|无|

### 1.3 参考资料
* 灯具进销存系统用例文档_v2.0
* 灯具进销存需求规格说明文档_v1.0  

## 2 产品描述
参考灯具进销存系统用例文档和灯具进销存需求规格说明文档中对产品的概括描述。

## 3 逻辑视角
灯具进销存管理系统中，选择了分层体系结构风格，将系统分为三层（展示层、业务逻辑层、数据层）能够很好地示意整个高层抽象。展示层包含GUI界面的实现，业务逻辑层包含业务逻辑处理的实现，数据层负责数据的持久化和访问。分层体系结构的逻辑视角和逻辑设计方案如下图所示。  
![](doc/img/StructureDiagrams/packageLogic.png)

## 4 组合视角
### 4.1 开发包图
### 4.2 运行时进程
在灯具进销存管理系统中，会同时存在多个客户端进程和一个服务器端进程，其进程图如下图所示。结合部署图，客户端实在客户端机器上运行，服务器端进程是在服务器端机器上运行。  
![](doc/img/StructureDiagrams/processPic.png)
  
### 4.3 物理部署
灯具进销存管理系统中的客户端构件是放在客户端机器上，服务器端构件是放在服务器端机器上的。在客户端节点上，还要部署Java RMI构件。由于Java RMI构件属于JDK1.8的一部分。所以，在系统JDK环境已经设置好的前提下，不需要再独立部署。部署图如下图所示。
![](doc/img/StructureDiagrams/deployPic.png)

## 5 接口视角
### 5.1 模块的职责
### 5.2 用户界面层的分解
#### 5.2.1 用户界面层的职责
#### 5.2.2 用户界面层模块的接口规范
#### 5.2.3 用户界面模块的设计原理
用户界面利用java的Swing和AWT库来实现  

### 5.3 业务逻辑层的分解
 业务逻辑层包括多个针对界面的业务逻辑处理对象。
 
#### 5.3.1 业务逻辑层模块的职责
<table>
<caption> 表8 业务逻辑层模块的职责 </caption>
    <tr>
        <td><strong><div class="text" style=" text-align:center;">模块</div></strong></td>
        <td><strong><div class="text" style=" text-align:center;">职责</div></strong></td>
    </tr>
    <tr>
        <td>analysisbl</td>
        <td>负责实现经营状况统计分析查看界面所需要的服务</td>
    </tr>
    <tr>
        <td>billbll</td>
        <td>负责实现单据操作界面所需要的服务</td>
    </tr>
    <tr>
        <td>initbl</td>
        <td>负责期初建账界面所需要的服务</td>
    </tr>
    <tr>
        <td>userbl</td>
        <td>负责系统用户管理界面所需要的服务</td>
    </tr>
    <tr>
        <td>commoditybl</td>
        <td>负责商品管理界面所需要的服务</td>
    </tr>
    <tr>
        <td>accountbl</td>
        <td>负责银行账户管理界面所需要的服务</td>
    </tr>
    <tr>
        <td>customerbl</td>
        <td>负责客户管理界面所需要的服务</td>
    </tr>
    <tr>
        <td>promotionbl</td>
        <td>负责促销策略管理界面所需要的服务</td>
    </tr>
    <tr>
        <td>logbl</td>
        <td>负责日志界面所需要的服务</td>
    </tr>
</table>
#### 5.3.2 业务逻辑层模块的接口规范
<table>
<caption>表9 Userbl模块的接口规范 </caption>  
    <tr>
        <td colspan="3">提供的服务（供接口）</td>
    </tr>
    <tr>
        <td rowspan="3">User.getUserInfo</td>
        <td>语法</td>
        <td>public ResultMessage getUserInfo(string id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动系统用户管理任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回查询的系统用户的结果</td>
    </tr>
    <tr>
        <td rowspan="3">User.addUser</td>
        <td>语法</td>
        <td>public ResultMessage addUser(string id,string name,string dept,string rank,string sex,<div>int birthyear,int birthmonth,string tel,string address,string mail)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动系统用户管理任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>增加新的系统用户，持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">User.updateUserInfo</td>
        <td>语法</td>
        <td>public ResultMessage updateUserInfo(string id,string name,string dept,string rank,<div>string sex,int birthyear,int birthmonth,string tel,string address,string mail)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>用户已添加到系统中</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">User.deleteUser</td>
        <td>语法</td>
        <td>public ResultMessage deleteUser(string id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>用户已添加到系统中</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除特定系统用户，持久化更新所涉及的数据</td>
    </tr>
</table>

<table>
<caption>表10 Customerbl模块的接口规范 </caption>  
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的服务（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">Customer.getCustomerInfo</td>
        <td>语法</td>
        <td>public ResultMessage getCustomerInfo(string id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动客户管理任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回查询的客户信息的结果</td>
    </tr>
    <tr>
        <td rowspan="3">Customer.addCustomer</td>
        <td>语法</td>
        <td>public ResultMessage addCustomer(string id,string category,string rank,string name,string tel,string address,<div>string zipcode,string mail,string payment_amount,string  salesman)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动客户管理任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>增加新的客户，持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Customer.updateCustomerInfo</td>
        <td>语法</td>
        <td>public ResultMessage updateCustomerInfo(string id,string category,string rank,string name,string tel,string address,<div>string zipcode,string mail,string payment_amount,string  salesman)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>客户已添加到系统中</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Customer.deleteCustomer</td>
        <td>语法</td>
        <td>public ResultMessage deleteCustomer(string id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>客户已添加到系统中</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除特定客户，持久化更新所涉及的数据</td>
    </tr>
</table>


<table>
<caption>表11 Billbl模块的接口规范 </caption> 
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的接口（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">Bill.chooseBillType</td>
        <td>语法</td>
        <td>public long chooseBillType(string type)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>开始新建单据任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回单据排号</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.getCommodityList</td>
        <td>语法</td>
        <td>public void getCommodityList();<div>public void getCommidtyList(string name)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已创建销售类单据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>进入商品选择界面</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.getCommodityInfo</td>
        <td>语法</td>
        <td>public ResultMessage getCommodityInfo(string commodity_id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已填写销售类单据基本信息，销售商、供货商、业务员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回商品详细信息</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.addCommodity</td>
        <td>语法</td>
        <td>public ResultMessage addCommodity(string id,long quantity,int storehouse);<div>public ResultMessage addCommodity(string id,long quantity)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已填写销售类单据基本信息：销售商、供货商、业务员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加商品到已选列表</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.calculateOneCommodity</td>
        <td>语法</td>
        <td>public double calculateOneCommodity(string commodity_id,long quantity)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已选择商品名称并填写商品数量</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回单项商品的金额总计</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.deleteCommodity</td>
        <td>语法</td>
        <td>public ResultMessage deleteCommodity(string commodity_id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已添加该商品至已选列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回删除结果</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.addRemark</td>
        <td>语法</td>
        <td>public void addRemark(string remark)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已选择商品名称</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>备注录入</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.calculateTotal</td>
        <td>语法</td>
        <td>public double calculateTotal(double commodity_sum[100],int num);<div>public double calculateTotal(double commodity_sum[100],int num,double discount,long coupon)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已完成商品添加</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回单据总金额</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.cancel</td>
        <td>语法</td>
        <td>public void cancel()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已新建单据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>撤销单据</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.finish</td>
        <td>语法</td>
        <td>public void finish()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已完成单据所有信息填写</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>结束单据制定，持久化更新涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.addTransferRecord</td>
        <td>语法</td>
        <td>public ResultMessage addTransferRecord(String account, double amount, string remark)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已新建财务类单据并录入表单信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回添加信息</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.calculateTransfer</td>
        <td>语法</td>
        <td>public double calculateTransfer(double record[100], int num)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已完成资金流动记录添加</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回该单据总计金额</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.deleteRecord</td>
        <td>语法</td>
        <td>public void deleteRecord(String account, double amount, string remark)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已添加记录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>完成删除，更新记录列表</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.saveDraft</td>
        <td>语法</td>
        <td>public void saveDraft(string billid)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已新建一张单据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>存储单据草稿</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.alarmStockOverflow</td>
        <td>语法</td>
        <td>public void alarmStockOverflow(string commodity_id, long num)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已新建库存类单据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>存储报溢信息</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.alarmStockLoss</td>
        <td>语法</td>
        <td>public void alarmStockLoss(string commodity_id, long num)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已新建库存类单据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>存储报损信息</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.setStockPresent</td>
        <td>语法</td>
        <td>public void setStockPresent(string commodity_id, long num)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已新建库存类单据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>存储库存商品赠送信息</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.getStockRemainAlarm</td>
        <td>语法</td>
        <td>public ResultMessage getStockRemainAlarm(string commodity_id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已设置商品库存警戒值</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回商品库存警戒信息</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.examine</td>
        <td>语法</td>
        <td>public ResultMessage examine(string bill_id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>单据为待审批状态</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更改单据状态为已通过或者未通过</td>
    </tr>
    
     <tr>
        <td rowspan="3">Bill.lookUp</td>
        <td>语法</td>
        <td>public ResultMessage lookUp(string select_condition)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>操作人员已被授权</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回查询的单据信息结果</td>
    </tr>
    
    <tr>
        <td rowspan="3">Bill.modify</td>
        <td>语法</td>
        <td>public ResultMessage modify(string alter_info)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>操作人员已被授权</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回修改的结果信息，持久化更新相关数据</td>
    </tr>
    
    <tr>
        <td rowspan="3">Bill.delete</td>
        <td>语法</td>
        <td>public ResultMessage delete(string bill_id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>操作人员已被授权</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回删除单据的结果信息</td>
    </tr>
</table>



<table>
<caption>表12 Accountbl模块的接口规范 </caption>  
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的服务（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">Account.getAccountInfo</td>
        <td>语法</td>
        <td>public ResultMessage getAccountInfo(string name)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>登录成功并启动银行账户管理任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回查询的银行账户信息的结果</td>
    </tr>
    <tr>
        <td rowspan="3">Account.addAccount</td>
        <td>语法</td>
        <td>public ResultMessage addAccount(string name, string account,double inital_money)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>登录成功并启动银行账户管理任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>增加新的银行账户，持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Account.updateAccountInfo</td>
        <td>语法</td>
        <td>public ResultMessage updateAccountInfo(string name, string account,double inital_money)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>此银行账户已创建</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Account.deleteAccount</td>
        <td>语法</td>
        <td>public ResultMessage deleteAccount(string name)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>次银行账户已添加到系统中</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除此银行账户，持久化更新所涉及的数据</td>
    </tr>
</table>

<table>
<caption>表13 Commoditybl模块的接口规范 </caption>  
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的服务（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">Commodity.getInfo</td>
        <td>语法</td>
        <td>public ResultMessage getInfo(string name)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动商品管理任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回查询商品信息的结果</td>
    </tr>
    <tr>
        <td rowspan="3">Commodity.add</td>
        <td>语法</td>
        <td>public ResultMessage add(string category, string aname, string type, long stock, long alarm_num)；<div>public ResultMessage add(string fathercato, string newcato)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动商品管理任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>增加新商品，持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Commodity.updateInfo</td>
        <td>语法</td>
        <td>public ResultMessage updateInfo(string oldcato, string newcato)；<div>public ResultMessage updateInfo(string id, string name, string type, long alarm_num)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>商品存在</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Commodity.delete</td>
        <td>语法</td>
        <td>public ResultMessage delete(string name)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>商品存在</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除商品，返回删除信息，持久化更新所涉及的数据</td>
    </tr>
    
     <tr>
        <td rowspan="3">Commodity.lookupStock</td>
        <td>语法</td>
        <td>public ResultMessage lookupStock(string begin_time, string end_time)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>操作人员已被授权</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回查看的商品库存结果</td>
    </tr>
    
     <tr>
        <td rowspan="3">Commodity.dayCheckStock</td>
        <td>语法</td>
        <td>public ResultMessage dayCheckStock()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>操作人员已被授权</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所查询库存情况</td>
    </tr>
    
    
</table>

<table>
<caption>表14 Promotionbl模块的接口规范 </caption>  
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的服务（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">Promotion.getInfo</td>
        <td>语法</td>
        <td>public ResultMessage getInfo(string name)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动促销策略制定任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所查询的促销策略的详细信息</td>
    </tr>
    <tr>
        <td rowspan="3">Promotion.new</td>
        <td>语法</td>
        <td>public ResultMessage new(PromotionStrategy new_strategy)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动销售策略制定任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>增加新销售策略，持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Promotion.updateInfo</td>
        <td>语法</td>
        <td>public ResultMessage updateInfo(PromotionStrategy strategy)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>此促销策略存在</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Promotion.delete</td>
        <td>语法</td>
        <td>public ResultMessage delete(PromotionStrategy strategy)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>此促销策略存在</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除促销策略，返回删除信息，持久化更新所涉及的数据</td>
    </tr>
</table>


<table>
<caption>表15 Inibl模块的接口规范 </caption>  
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的服务（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">Ini.create</td>
        <td>语法</td>
        <td>public ResultMessage create(Commodity[] com_info, Account[] acc_info, Customer[] cus_info)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动期初建账定任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>保存期初建账结果，持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Ini.check</td>
        <td>语法</td>
        <td>public ResultMessage check()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>期初建账已完成</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回查询结果</td>
    </tr>
</table>

<table>
<caption>表16 Analysisbl模块的接口规范 </caption>  
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的服务（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">Analysis.getSaleDetails</td>
        <td>语法</td>
        <td>public ResultMessage getSaleDetails(string scope)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>操作人员已被授权</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所查询的销售明细的详细信息</td>
    </tr>
    <tr>
        <td rowspan="3">Analysis.getOperateCondition</td>
        <td>语法</td>
        <td>public ResultMessage getOperateCondition(string start_time, string end_time)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>操作人员已被授权</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所查询的经营状况的详细信息</td>
    </tr>
    <tr>
        <td rowspan="3">Analysis.lookUpBills</td>
        <td>语法</td>
        <td>public ResultMessage lookUpBills(string select_condition)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>操作人员已被授权</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所查询的单据的信息</td>
    </tr>
    <tr>
        <td rowspan="3">analysis.offset</td>
        <td>语法</td>
        <td>public ResultMessage offset(string bill_id, boolean copy)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>有待冲销的账款</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回冲销操作的结果信息，持久化更新所涉及的数据</td>
    </tr>
</table>


<table>
<caption>表17 Logbl模块的接口规范 </caption>  
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的服务（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">Log.lookUp</td>
        <td>语法</td>
        <td>public ResultMessage lookUp(string start_time, string end_time)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td> </td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所查看的结果信息</td>
    </tr>
    <tr>
        <td rowspan="3">Log.exit</td>
        <td>语法</td>
        <td>public void exit()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>查询已完成</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>结束任务</td>
    </tr>
</table>

### 5.4 数据层的分解
#### 5.4.1 数据层模块的职责
#### 5.4.2 数据层模块的接口规范

### 6 信息视角
#### 6.1 数据持久化对象
系统的PO类就是对应的相关实体类，系统主要的PO类如下图所示。  
* CategoryPO类：商品分类PO类，包含父分类名称，商品分类名称，商品分类编号。  
* CommodityPO类：商品PO类，包含商品分类名称，商品名称，商品编号，型号，库存数量，进价，零售价，最近进价，最近零售价，警戒值。  
* CustomerPO类：客户信息PO类，包含客户姓名，客户编号，分类，级别，电话，地址，邮编，电子邮箱，应收额度，应收，应付，默认业务员。  
* AccountPO类：账户信息PO类，包含银行账号，账户名称，余额。  
* InitializationPO类：期初信息PO类，包含时间区间，商品信息，客户信息，银行账户信息。  
* UserPO类：用户信息PO类，包含用户姓名，用户权限，用户编号。  
* LogPO类：日志记录PO类，包含时间，操作员，操作记录。  
* InventoryPO类：包含操作员，单据编号，商品，库存更改值。  
* Bill_PurchasePO类：包含操作员，单据编号，供应商，仓库，入库商品列表（包括商品编号，商品名称，型号，数量，单价，金额，备注），备注，总额合计。  
* Bill_SalePO类：包含操作员，单据编号，客户，业务员，仓库，出货商品列表（包括商品编号，商品名称，型号，数量，单价，金额，备注），折让前总额，折让，使用代金券金额，折让后总额，备注。  
* Bill_ReturnPO类：包含操作员，单据编号，客户，仓库，退货商品列表（包括商品编号，商品名称，型号，数量，单价，金额，备注），备注，应退金额总计。  
* Bill_PayOrReceivePO类：包含操作员，单据编号，客户，转账列表（银行账户，转账金额，备注），金额汇总。  
* Bill_CashPO类：包含操作员，单据编号，银行账户，条目清单（条目名，金额，备注），金额汇总。  
* Bill_GiftPO类：包含操作员，单据编号，仓库，赠送商品列表（包括商品编号，商品名称，型号，数量）。  

#### 6.2 Ser持久化对象
采用序列化存储方式，将数据存储在各个PO对应的.ser文件里  