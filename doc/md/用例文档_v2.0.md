灯具进销存管理系统用例文档V1.0
===
变更记录
---
| 修改人员 |日期 | 变更原因| 版本号 |
| ------   |---- | ----    | :----: |
| 全员     |2017.9.17| 第一稿  |   v1.0 |
| 全员     |2017.9.24| 增加了用户管理、查看日志用例<br/>完善了部分用例描述  |   v1.1 |
| 全员     |2017.10.9| 根据文档点评修改并完善了用例的流程描述<br/>增加了单据管理用例<br/>将制定进退货单、查看统计分析分别细化为两个用例<br/>更新了目录与排版  |   v2.0 |

目录
---
## ![1. 引言 ](#1-引言) ##
### ![1.1 目的](#11-目的) ###
### ![1.2 阅读说明](#12-阅读说明) ###
### ![1.3 参考文献](#13-参考文献) ###
## ![2. 用例列表](#2-用例列表) ##
## ![3. 用例图](#3-用例图) ##
## ![4. 详细用例描述](#4-详细用例描述) ##
### ![4.1 单据管理](#41-单据管理) ###
### ![4.2 商品分类管理](#42-商品分类管理) ###
### ![4.3 商品管理](#43-商品管理) ###
### ![4.4 库存管理](#44-库存管理) ###
### ![4.5 库存调整](#45-库存调整) ###
### ![4.6 客户管理](#46-客户管理) ###
### ![4.7 制定进货单](#47-制定进货单) ###
### ![4.8 制定进货退货单](#48-制定进货退货单) ###
### ![4.9 制定销售单](#49-制定销售单) ###
### ![4.10 制定销售退货单](#410-制定销售退货单) ###
### ![4.11 银行账户管理](#411-银行账户管理) ###
### ![4.12 制定收付款单](#412-制定收付款单) ###
### ![4.13 制定现金费用单](#413-制定现金费用单) ###
### ![4.14 查看销售明细表](#414-查看销售明细表) ###
### ![4.15 查看经营状况表](#415-查看经营状况表) ###
### ![4.16 查看经营历程表](#416-查看经营历程表) ###
### ![4.17 期初建账](#417-期初建账) ###
### ![4.18 查看日志](#418-查看日志) ###
### ![4.19 审批单据](#419-审批单据) ###
### ![4.20 制定促销策略](#420-制定促销策略) ###
### ![4.21 用户管理](#421-用户管理) ###
---
1 引言
---
### 1.1 目的 ###
本文档描述了灯具进销存系统的用户需求。
### 1.2 阅读说明 ###
用例描述的约定为必须包含用例ID、用例、创建日期、最后一天日期、参与者、触发条件、前置条件、后置条件、优先级、正常流程、扩展流程等特殊需求。其中流程要完整有序地描述该用例中使用者与系统的交互。
### 1.3 参考文献 ###
《软件工程与计算卷二》、《软件开发的技术基础》，UML 2.0 语法，IEEE 标准。
2 用例列表
---
|参与者|用例|
|:--|:--|
|库存管理人员|1.单据管理<br/>2.商品分类管理<br/>3.商品管理<br/>4.库存管理<br/>5.库存调整|
|进货销售人员|1.单据管理<br/>6.客户管理<br/>7.制定进货单<br/>8.制定进货退货单<br/>9.制定销售单<br/>10.制定销售退货单|
|财务人员|1.单据管理<br/>11.账户管理<br/>12.制定收付款单<br/>13.制定付款单<br/>14.查看销售明细表<br/>15.查看经营状况表<br/>16.查看经营历程表<br/>17.期初建账<br/>18.查看日志|
|总经理|19.审批单据<br/>14.查看销售明细表<br/>15.查看经营状况表<br/>16.查看经营历程表<br/>18.查看日志<br/>20.制定促销策略|
|系统管理员|21.用户管理|
3 用例图
---
![](http://101.37.19.32:10080/Orz/ERPnju/raw/9d51b8137d92e19703cce7d514db30d15ed1dd10/doc/img/UseCaseDiagrams/AllUserCases.png)
4 详细用例描述
---
### 4.1 单据管理 
|ID|1|名称|单据管理|
|:--|:--|:--|:--|
|创建者|万嘉雯|最后一次更新者|万嘉雯|
|创建日期|2017.10.6|最后一次更新日期|2017.10.6|

|参与者|进货销售人员、库存管理人员、财务人员，目标是快速、便捷地管理系统中生成的单据|
|:--|:--|
|触发条件|无|
|前置条件|进货销售人员、库存管理人员、财务人员必须已经被识别和授权|
|后置条件|存储更新后的单据数据|
|优先级|中|
|正常流程|<pre>1.0查看单据<br/>1、操作人员选择查找方式（按系统用户编号或者关键字，默认按编号）并输入相关单据的编号或者关键字<br/>2、系统显示该单据详细信息（参见各类单据制定的用例）以及该单据状态<br/>1.1修改单据<br/>1、操作人员请求修改单据<br/>2、系统进入单据编辑页面<br/>3、操作人员编辑修改单据内容并确认<br/>4、系统保存更新后的单据<br/>1.2删除单据<br/>1、操作人员选择待删除单据并请求删除<br/>2、系统完成删除操作并保存更新后的单据列表</pre>|
|扩展流程|<pre>1.0-1a、单据编号格式错误，不是以JHD-、XSTHD-等单据标识符开头<br/>&emsp;&emsp;1、系统提示正确输入格式<br/>1.0-1b、单据不存在<br/>&emsp;&emsp;1、系统提示该单据不存在<br/>1.0-1c、操作人员选择查看未审批或已审批单据<br/>&emsp;&emsp;1、系统返回未审批或已审批单据列表<br/>2.0-1a、单据处于已审批完成状态<br/>&emsp;&emsp;1、系统不提供修改操作<br/>3.0-1a、单据处于审批完成状态<br/>&emsp;&emsp;1、系统不提供删除操作</pre>|
|特殊需求|无|

### 4.2 商品分类管理 ###
|ID|2|名称|商品分类管理|
|:--|:--|:--|:--|
|创建者|恽叶霄|最后一次更新者|恽叶霄|
|创建日期|2017.9.14|最后一次更新日期|2017.10.8|

<table border=3>
<tr>
<td>参与者</td>
<td>库存管理人员，目标是良好地管理商品分类</td>
<tr>
<td>触发条件</td>
<td>库存管理人员选择一个分类</td> 
<tr>
<td>前置条件</td>
<td>库存管理人员必须登录</td>
<tr>
<td>后置条件</td>
<td>更新相关数据</td>
<tr>
<td>正常流程</td>
<td>1.0 查看分类<br>
1.库存管理人员选择一个分类<br>
2.系统显示该分类的相关信息，包括：编号、子分类名列表、创建时间、修改时间<br>
<br>1.1 增加分类<br>
1.库存管理人员对选中分类进行增加分类操作,并输入分类名称<br>
2.系统在该分类的子类下增加一个分类，并生成一个编号<br>
<br>1.2 删除分类<br>
1.库存管理人员对选中分类进行删除分类操作<br>
2.系统删除选中分类及其编号，同时删除所有子类及对应编号<br>
<br>1.3 修改分类<br> 
1.库存管理人员对选中分类进行修改分类操作，输入新名称<br>
2.系统修改对应分类名称</td>
<tr>
<td>扩展流程</td>
<td>1.1-1a. 库存管理人员在已有商品的分类下增加分类<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	1. 提示无法在已有商品的分类下增加分类，拒绝操作<br>
<br>1.2-1a. 选中节点已有商品<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	1. 提示无法删除已有商品的分类，拒绝操作<br>
<br>1.3-1a. 新名称与已有分类冲突<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	1. 提示新信息与已有商品冲突，要求重新输入</td>
<tr>
<td>特殊需求</td>
<td>无</td>
</table>

### 4.3 商品管理 ###
|ID|3|名称|商品管理|
|:--|:--|:--|:--|
|创建者|恽叶霄|最后一次更新者|恽叶霄|
|创建日期|2017.9.14|最后一次更新日期|2017.10.8|

<table border=3>
<tr>
<td>参与者</td>
<td>库存管理人员，目标是良好的管理商品</td>
<tr>
<td>触发条件</td>
<td>库存管理人员需要管理商品</td>
<tr>
<td>前置条件</td>
<td>库存管理人员必须登录</td>
<tr>
<td>后置条件</td>
<td>系统更新相关数据</td>
<tr>
<td>正常流程</td>
<td>1.0 查看商品<br>
1.库存管理人员选择一个叶节点<br>
2.系统展示对应叶节点下所有商品的信息, 包括编号、名称、型号、库存数量、进价、零售价、最近进价、最近零售价、警戒值<br>
<br>1.1 增加商品<br>
1.库存管理人员在选中叶节点下请求增加商品操作，输入新增商品名、型号、库存数量、警戒值<br>
2.在对应位置增加商品，根据所在分类及添加顺序生成对应商品编号<br>
<br>1.2 删除商品<br>
1.库存管理人员选中叶节点下请求删除商品操作<br>
2.删除对应商品<br>
<br>1.3 修改商品<br>
1.库存管理人员选择商品并输入新商品信息, 可修改的商品信息包括：商品名称、型号、警戒值。<br>
2.修改对应商品信息<br>
<br>1.4 查询商品<br>
1.库存管理人员输入商品名或商品编号进行搜索操作<br>
2.系统查找相关商品并显示结果<br></td>
<tr>
<td>扩展流程</td>
<td>1.1-1a. 商品已存在<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	1.提示该商品已存在，拒绝操作<br>
<br>1.1-1b. 选中的节点非叶节点<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	1. 提示选中的节点非叶节点无法增加商品，拒绝操作<br>
<br>1.3-1a. 新信息与已有商品冲突<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	1.显示该信息与已有的商品冲突，要求重新输入<br>
<br>1.4-1a. 非法商品编号<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	1. 提示商品编号非法，要求重新输入</td>
<tr>
<td>特殊需求</td>
<td>商品查询必须支持模糊查找</td>
</table>

### 4.4 库存管理 ###
|ID|4|名称|库存管理|
|:--|:--|:--|:--|
|创建者|恽叶霄|最后一次更新者|恽叶霄|
|创建日期|2017.9.14|最后一次更新日期|2017.10.8|

<table border=3>
<tr>
<td>参与者</td>
<td>库存管理人员，目的是良好的管理库存</td>
<tr>
<td>触发条件</td>
<td>库存管理人员查看库存</td>
<tr>
<td>前置条件</td>
<td>库存管理人员必须登录</td>
<tr>
<td>后置条件</td>
<td>无</td>
<tr>
<td>正常流程</td>
<td>1.0 库存查看<br>
1.库存管理人员设定一个时间段并查看相应库存的动态<br>
2.系统将对应时间段内的所有商品的出/入库数量/金额，销售/进货的数量/金额显示出来<br>
<br>1.1 库存盘点<br>
1.库存管理人员查看当天的库存快照<br>
2.系统显示当天的库存快照，包括当天的各种商品的名称，型号，库存数量，库存均价，批次，批号，出厂日期，并且显示行号</td>
<tr>
<td>扩展流程</td>
<td>无</td>
<tr>
<td>特殊需求</td>
<td>库存快照要求可以导出Excel</td>
</table>

### 4.5 库存调整 ###
|ID|5|名称|库存调整|
|:--|:--|:--|:--|
|创建者|恽叶霄|最后一次更新者|恽叶霄|
|创建日期|2017.9.14|最后一次更新日期|2017.10.8|

<table border=3>
<tr>
<td>参与者</td>
<td>库存管理人员，目的是良好的管理库存</td>
<tr>
<td>触发条件</td>
<td>实际库存有变化</td>
<tr>
<td>前置条件</td>
<td>库存管理人员必须登录</td>
<tr>
<td>后置条件</td>
<td>无</td>
<tr>
<td>正常流程</td>
<td>1.0 库存报溢<br>
1.库存管理人员输入实际库存相对于系统库存多出的商品名称和数量<br>
2.系统生成库存报溢单移交总经理<br>
<br>1.1 库存报损<br>
1.库管输入实际库存相对于系统库存缺少的商品名称和数量<br>
2.系统生成库存报损单移交总经理</td>
<tr>
<td>扩展流程</td>
<td>1.0-1a. 商品名称不存在<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	1. 系统提示商品名称不存在，请求重新输入<br>
<br>1.1-1a. 商品名称不存在<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	1. 同1.0-1a-1<br>
<br>1.1-1b. 缺少的数量超出系统库存总量<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
	1. 系统提示系统库存不足，请求重新输入</td>
<tr>
<td>特殊需求</td>
<td>无</td>
</table>

### 4.6 客户管理 ###
|ID|6|名称|客户管理|
|:--|:--|:--|:--|
|创建者|万嘉雯|最后一次更新者|万嘉雯|
|创建日期|2017.9.13|最后一次更新日期|2017.10.8|

|参与者|销售人员，目的是对客户便捷地分类管理与快速查询|
|:--|:--|
|触发条件|客户的信息出现变动或者业务流程中需要客户相关信息|
|前置条件|进货销售人员必须已经被识别和授权|
|后置条件|系统存储更新的客户信息|
|优先级|中|
|正常流程|1.0查看客户信息<br/>1、进货销售人员选择查找方式（按客户编号或者关键字，默认按编号）并输入相关客户编号或者关键字<br/>2、系统显示该客户信息，包括客户的编号、分类、级别、姓名、电话、地址、邮编、电子邮箱、应收额度、应收（只读）、应付（只读）、默认业务员<br/>2.0添加客户<br/>1、进货销售人员请求添加新客户<br/>2、系统进入客户信息编辑界面<br/>3、销售人员编辑客户信息并保存<br/>4、系统提示添加成功<br/>3.0更改客户信息<br/>1、进货销售人员请求更改客户信息<br/>2、系统进入客户信息编辑界面<br/>3、进货销售人员更改客户信息并保存<br/>4、系统提示更新成功<br/>4.0删除客户<br/>1、进货销售人员选中待删除客户并选择删除<br/>2、系统询问是否确认删除<br/>3、进货销售人员确认删除<br/>4、系统完成删除操作并更新客户列表|
|扩展流程|<pre>1.0-1a、按编号查询时客户编号不是以JHS或XSS开头<br/>&emsp;&emsp;1、系统提示正确的输入格式并拒绝此次输入<br/>1.0-1b、系统中无该客户<br/>&emsp;&emsp;1、系统提示该用户不存在并询问是否添加用户<br/>&emsp;&emsp;&emsp;&emsp;1a、销售人员选择取消<br/>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;系统返回客户信息列表<br/>&emsp;&emsp;&emsp;&emsp;1b、销售人员选择添加<br/>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;返回正常流程2.0<br/>2.0-3a、客户已存在列表中<br/>&emsp;&emsp;1、系统提示该客户已存在并拒绝执行此次添加<br/>2.0-3b、客户信息留空或邮箱格式不正确<br/>&emsp;&emsp;1、系统提示客户信息不可留空或邮箱格式错误<br/>3.0-3a、未更改信息<br/>&emsp;&emsp;1、系统提示未进行任何更新<br/>4.0-1a、待删除客户有未完成业务<br/>&emsp;&emsp;1、系统提示该客户尚有账单处于待审批状态，建议谨慎删除，并询问是否确认删除</pre>
|
|特殊需求|1、客户信息包括客户的编号、分类、级别、姓名、电话、地址、邮编、电子邮箱、应收额度、应收（只读）、应付（只读）、默认业务员<br/>2、进货商编号格式为JHS-XXXX；销售商编号格式为XSS-XXXX|

### 4.7 制定进货单 ###
|ID|7|名称|制定进货单|
|:--|:--|:--|:--|
|创建者|万嘉雯|最后一次更新者|万嘉雯|
|创建日期|2017.9.13|最后一次更新日期|2017.10.8|

|参与者|销售人员，目标是快速、正确地制定进货单据，避免出现错误|
|:--|:--|
|触发条件|发生一笔进货交易|
|前置条件|销售人员必须已经被识别和授权。|
|后置条件|存储本次进货电子单据|
|优先级|高|
|正常流程|<pre>1、销售人员新建一个进货单<br/>2、系统自动根据当日排序生成单号<br/>3、销售人员输入供应商并申请添加入库商品<br/>4、系统显示该供应商提供的商品列表<br/>5、销售人员选择商品名称，填写进货数量和入库仓库并确认<br/>6、系统自动填充商品编号、型号、单价以及自动计算总金额<br/>7、销售人员填写特定商品备注并确认添加<br/>8、系统将该商品添加到入库商品列表并显示入库商品列表列表<br/>重复4-8步，直到所有的商品选择完成<br/>9、销售人员填写进货单的特殊备注<br/>10、系统自动合计总额<br/>11、销售人员确认完成单据<br/>12、系统保存该进退货单据</pre>|
|扩展流程|<pre>3a、供应商编号格式错误，不是以JHS-开头<br/>&emsp;&emsp;1、系统提示错误和正确格式并拒绝输入<br/>3b、该供应商不存在<br/>&emsp;&emsp;1、系统提示该供应商不存在并提示应先添加该供应商至客户列表中<br/>5a、输入应进的商品数量>仓库剩余容量<br/>&emsp;&emsp;1、系统提示仓库剩余空间不足建议更换仓库<br/>5b、商品填充信息缺失<br/>&emsp;&emsp;1、系统提示信息为空<br/>8a、删除特定商品<br/>&emsp;&emsp;1、系统从已选商品列表中将商品删除</pre>|
|特殊需求|1、单据编号格式为：JHD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>2、进退货电子单据包括：单据编号，供应商，仓库，操作员，入库商品列表，备注，总额合计|
### 4.8 制定进货退货单
|ID|8|名称|定制进货退货单|
|:--|:--|:--|:--|
|创建者|万嘉雯|最后一次更新者|万嘉雯|
|创建日期|2017.9.13|最后一次更新日期|2017.10.8|
  
|参与者|销售人员，目标是快速、正确地制定进货退货单据，避免出现错误|
|:--|:--|
|触发条件|发生一笔进货退货业务|
|前置条件|销售人员必须已经被识别和授权。|
|后置条件|存储本次进货退货电子单据|
|优先级|中|
|正常流程|<pre>1、销售人员新建一个进货退货单<br/>2、系统自动根据当日排序生成单号<br/>3、销售人员输入供应商并请求添加出库商品<br/>4、系统显示从该供应商已购的商品列表<br/>5、销售人员选择商品名称<br/>6、系统显示商品所在仓库以及之前购买的数量<br/>7、销售人员输入应退商品数量<br/>8、系统自动填充商品编号、型号、单价以及自动合计该商品总额<br/>9、销售人员填写特定商品备注并确认添加<br/>10、系统显示出库商品列表<br/>重复4-10步，直到所有的商品选择完成<br/>11、销售人员填写进货退货单的特殊备注<br/>12、系统自动合计退货单商品总额<br/>13、销售人员确认完成单据<br/>14、系统保存该进货退货单据</pre>|
|扩展流程|<pre>3a、供应商编号格式错误，不是以JHS-开头<br/>&emsp;&emsp;1、系统提示错误和正确格式并拒绝输入<br/>3b、该供应商不存在<br/>&emsp;&emsp;1、系统提示该供应商不存在并提示应先添加该供应商至客户列表中<br/>7a、输入应退的商品数量>该商品原购买数量<br/>&emsp;&emsp;1、系统提示商品数量大于原购买数量并拒绝输入<br/>10a、删除特定商品<br/>&emsp;&emsp;1、系统从出库商品列表中将商品删除</pre>|
|特殊需求|1、单据编号格式为：JHTHD-yyyyMMdd-xxxxx，后五位每天从1开始编号<br/>2、进货退货电子单据信息包括：单据编号，供应商，仓库，操作员，出库商品列表，备注，总额合计|

### 4.9 制定销售单 ###
|ID|9|名称|制定销售单|
|:--|:--|:--|:--|
|创建者|万嘉雯|最后一次更新者|万嘉雯|
|创建日期|2017.9.13|最后一次更新日期|2017.10.8|

|参与者|销售人员，目标是快速、准确地制定销售单据，避免出现商品与金额错误。|
|:--|:--|
|触发条件|收到销售出货请求|
|前置条件|销售人员必须已经被识别和授权。|
|后置条件|存储销售出货单|
|优先级|高|
|正常流程|<pre>1、销售人员新建销售单<br/>2、系统根据当日排序生成单号<br/>3、销售人员填写客户、业务员并请求添加出货商品<br/>4、系统显示商品选择界面<br/>5、销售人员选择商品名称<br/>6、系统显示该商品该仓库库存量<br/>7、销售人员填写出货数量<br/>8、系统显示该商品编号、名称、型号、总数量、默认单价、自动计算生成总额<br/>9、销售人员进行核对并填写商品备注并确认添加<br/>10、系统显示已选商品列表<br/>重复4-10步，直到所有出货商品选择完成<br/>11、系统计算所有商品折让前总额<br/>12、销售人员输入折让与使用代金券金额<br/>13、系统计算折让后总额<br/>14、销售人员填写备注并确认<br/>15、系统生成并保存该销售单</pre>|
|扩展流程|<pre>3a、客户编号格式错误，不是以XSH-开头<br/>&emsp;&emsp;1、系统提示错误和正确格式并拒绝输入<br/>3b、该客户不存在<br/>&emsp;&emsp;1、系统提示该客户不存在并提示应先添加该客户至客户列表中<br/>3c、业务员信息为空<br/>&emsp;&emsp;1、系统提示业务员信息不可为空<br/>7a、出货量>库存量：<br/>&emsp;&emsp;1、系统提示库存不足并拒绝输入<br/>10a、删除已选商品列表中商品<br/>&emsp;&emsp;1、系统将特定商品从出货列表中删除<br/>12a、输入折让金额>权限允许最大折让金额：<br/>&emsp;&emsp;1、系统提示权限不足，无法输入<br/>12b、使用代金券金额>客户级别允许的最高金额：<br/>&emsp;&emsp;1、系统提示用户级别不足，无法输入</pre>|
|特殊需求|1、单据编号格式为XSD-yyyyMMdd-xxxxx<br/>2、销售出货单包括：单据编号，客户，业务员，操作员，仓库，出货商品清单，折让前总额，折让，使用代金卷金额，折让后总额，备注|

### 4.10 制定销售退货单 ###
|ID|10|名称|制定销售退货单|
|:--|:--|:--|:--|
|创建者|万嘉雯|最后一次更新者|万嘉雯|
|创建日期|2017.9.13|最后一次更新日期|2017.10.8|

|参与者|销售人员，目标是快速、准确地制定商品退货单据，避免出现商品、数量与金额差错|
|:--|:--|
|触发条件|接收到退货请求|
|前置条件|收银员必须已经被识别和授权。|
|后置条件|存储生成的退货单据|
|优先级|中|
|正常流程|<pre>1、销售人员新建销售退货单<br/>2、系统根据当日排序生成单号<br/>3、销售人员填写客户、业务员信息并请求添加退货入库商品<br/>4、系统显示该客户已购买商品信息列表<br/>5、销售人员选择需要接收退货的商品名称，填写退货数量<br/>6、系统显示该商品原单价总价以及折后价，并自动计算应退款总金额<br/>7、销售人员填写备注<br/>销售人员重复4-7步，直到完成所有商品的输入<br/>8、系统显示应接收退货的商品列表并计算应退款总金额<br/>9、销售人员填写备注并确认<br/>10、系统保存销售退货单</pre>|
|扩展流程|<pre>3a、客户编号格式错误，不是以XSH-开头<br/>&emsp;&emsp;1、系统提示错误和正确格式并拒绝输入<br/>3b、该客户不存在<br/>&emsp;&emsp;1、系统提示该客户不存在并提示应先添加该客户至客户列表中<br/>3c、业务员信息为空<br/>&emsp;&emsp;1、系统提示业务员信息不可为空<br/>5a、销售退货数量>原购买数量：<br/>&emsp;&emsp;1、系统提示退货数量超过原购买量并拒绝输入<br/>5b、所选商品超过退货期限<br/>&emsp;&emsp;1、系统提示退货超期，无法完成退货<br/>8a、删除已选销售退货商品列表中商品<br/>&emsp;&emsp;1、系统将商品从销售退货商品列表中删除</pre>|
|特殊需求|1、单据编号格式为XSTHD-yyyyMMdd-xxxxx<br/>2、销售退货单据信息包括：单据编号，客户，业务员，操作员，仓库，出货商品清单，应退金额总额，备注|

### 4.11 银行账户管理 ###
|ID|11|名称|银行账户管理|
|:--|:--|:--|:--|
|创建者|钱美缘|最后一次更新者|钱美缘|
|创建日期|2017.9.13|最后一次更新日期|2017.10.6|

|参与者|财务人员（最高权限），目标是快速科学地管理银行账户|
|:--|:--------------------------|
|触发条件|财务人员需要管理公司的银行账户|
|前置条件|财务人员必须已经被识别和授权|
|后置条件|系统记录修改后的账户信息|
|优先级|中|
|正常流程|<pre>1.0 查询账户<br/>1 财务人员输入关键字（如账户名称）进行查询<br/>2 系统显示账户名称、账号及余额<br/>1.1 增加账户<br/>1 财务人员输入新的账户名称、银行账号和初始金额并确认增加<br/>2 系统保存新增的账户并刷新账户列表<br/>1.2 删除账户<br/>1 财务人员选择一个账户<br/>2 系统显示该账户名和余额<br/>3 财务人员确认删除<br/>4 系统删除该账户信息并刷新账户列表<br/>1.3 修改账户属性<br/>1 财务人员选择一个账户<br/>2 系统显示该账户名称、账号及余额<br/>3 财务人员输入新的名称<br/>4 财务人员确认修改<br/>5 系统修改改账户名称并刷新账户列表</pre>|
|扩展流程|<pre>1.0 查询账户<br/>1a 输入的账户不存在<br/>&nbsp;&nbsp;1 系统显示空列表，要求重新输入<br/>1.1 增加账户<br/>1a 系统中存在相同的银行账号<br/>&nbsp;&nbsp;1 系统提示账号已存在，要求重新输入<br/>1b 财务人员取消增加账户<br/>&nbsp;&nbsp;1 系统取消该流程<br/>1.2 删除账户<br/>3a 财务人员取消删除账户<br/>&nbsp;&nbsp;1 系统取消该流程<br/>3b 选中账户的余额不为0<br/>&nbsp;&nbsp;1 系统提示账户余额不为0，并拒绝删除<br/>1.3 修改账户<br/>4b 财务人员取消修改账户<br/>&nbsp;&nbsp;1 系统不保存修改取消流程<br/></pre>|
|特殊需求|1 账户的查询可以通过关键字进行模糊查找<br/>2 仅最高权限的财务人员可以进行增删查改<br/>3 普通权限的财务人员不能完全查看账户名称和余额<br/>4 账户的余额不可以修改（取决于收款单和付款单）|

### 4.12 制定收付款单 ###
|ID|12|名称|制定收付款单|
|:--|:--|:--|:--|
|创建者|钱美缘|最后一次更新者|钱美缘|
|创建日期|2017.9.14|最后一次更新日期|2017.10.7|

|参与者|财务人员，目标是快速正确地建立收款单或者付款单|
|:--|:--------------------------|
|触发条件|财务人员需要记录资金的流动|
|前置条件|财务人员已被系统识别和授权|
|后置条件|系统保存完成的收款单或付款单|
|优先级|高|
|正常流程|1 财务人员向系统申请录入收款单或者付款单<br/>2 系统显示一份空白的收款单或者付款单<br/>3 财务人员选择单据类型并录入相关信息（如选择客户等）单据编号和操作员信息自动生成。<br/>4 财务人员选择新增一条转账列表<br/>5 系统显示一条新的转账列表记录<br/>6 财务人员选择银行账户、输入转账金额和备注<br/>7 系统显示已输入的转账信息，计算并显示转账总金额<br/>财务人员重复4-7步，直到输入所有转账信息<br/>8 财务人员确认相关信息并提交<br/>9 系统保存填写好的单据显示操作成功<br/>|
|扩展流程|<pre>4a 财务人员需要删除一条转账列表记录<br/>&nbsp;&nbsp;1 系统将这条记录删除<br/>6a 输入转账金额不为正数<br/>&nbsp;&nbsp;1 系统提示转账金额非法，要求重新输入<br/>8a 财务人员取消确认<br/>&nbsp;&nbsp;1 系统返回单据编辑界面<br/>8b 转账列表为空<br/>&nbsp;&nbsp;1 系统拒绝提交并提示转账列表为空<br/>3-8a 财务人员选择其他功能<br/>&nbsp;&nbsp;1 系统询问是否保存单据草稿<br/>&nbsp;&nbsp;&nbsp;&nbsp;1a 财务人员选择确认<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 系统保存单据为已提交状态<br/>&nbsp;&nbsp;&nbsp;&nbsp;1b 财务人员选择不保存退出<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 系统清空单据内容不保存并退出</pre>|
|特殊需求|1 收款单据编号格式为SKD-yyyyMMdd-xxxxx，操作员为当前登录用户。<br/>2 付款单据编号格式为FKD-yyyyMMdd-xxxxx，操作员为当前登录用户。<br/>3 单据编号从1开始标至99999，若超出范围则不能建立单据|

### 4.13 制定现金费用单 ###
|ID|13|名称|制定现金费用单|
|:--|:--|:--|:--|
|创建者|钱美缘|最后一次更新者|钱美缘|
|创建日期|2017.9.14|最后一次更新日期|2017.10.7|

|参与者|财务人员，目标是快速正确地建立现金费用单|
|:--|:--------------------------|
|触发条件|财务人员需要处理报销等事务|
|前置条件|财务人员已被系统识别和授权|
|后置条件|系统保存完成的现金费用单|
|优先级|高|
|正常流程|1 财务人员向系统申请录入现金费用单<br/>2 系统显示一份空白的现金费用单<br/>3 财务人员录入相关信息，包括选择银行账户等。单据编号和操作员信息自动生成。<br/>4 财务人员选择增加一条条目列表记录<br/>5 系统生成一条空白的条目列表记录<br/>6 财务人员输入条目名、金额和备注<br/>7 系统显示已输入的条目列表，计算并显示总金额<br/>财务人员重复4-7步，直到完成条目列表的输入<br/>8 财务人员确认相关信息并提交单据<br/>9 系统保存现金费用单，显示操作成功并返回|
|扩展流程|<pre>4a 财务人员需要删除一条条目列表记录<br/>&nbsp;&nbsp;1 系统将这条记录删除<br/>6a 条目名为空<br/>&nbsp;&nbsp;1 系统提示条目名为空，要求输入条目名<br/>5b 输入金额不为正数<br/>&nbsp;&nbsp;1 系统提示金额非法，要求重新输入<br/>8a 财务人员取消确认<br/>&nbsp;&nbsp;1 系统返回单据编辑界面<br/>8b 条目列表为空<br/>&nbsp;&nbsp;1 系统拒绝提交并提示条目列表为空<br/>3-8a 财务人员选择其他功能<br/>&nbsp;&nbsp;1 系统询问是否保存单据草稿<br/>&nbsp;&nbsp;&nbsp;&nbsp;1a 财务人员选择确认<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 系统保存单据为已提交状态<br/>&nbsp;&nbsp;&nbsp;&nbsp;1b 财务人员选择不保存退出<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 系统清空单据内容不保存并退出</pre>|
|特殊需求|1 单据编号格式为XJFYD-yyyyMMdd-xxxxx，操作员为当前登录用户。<br/>2 单据编号从1开始标至99999，若超出范围则不能建立单据。|

### 4.14 查看销售明细表
|ID|14|名称|查看销售明细表|
|:--|:--|:--|:--|
|创建者|钱美缘|最后一次更新者|钱美缘|
|创建日期|2017.9.14|最后一次更新日期|2017.10.7|

|参与者|财务人员，目标是快速科学地了解公司的销售账目情况。<br/>总经理，目标是快速科学地了解公司的销售情况|
|:--|:--------------------------|
|触发条件|财务人员或者总经理需要了解公司的销售情况|
|前置条件|财务人员已被系统识别和授权<br/>总经理已被系统识别和授权|
|后置条件|无|
|优先级|低|
|正常流程|1.0 查看 <br/>1 财务人员选择查看销售明细表<br/>2 系统以分页方式显示销售记录<br/>3 财务人员选择筛选条件，包括时间区间、商户名、客户、业务员、仓库，并确认进行筛选<br/>4 系统在销售出货单据记录中筛选数据并以列表形式显示<br/>财务人员重复3-4步，直到筛选出所需数据<br/>1.1 导出<br/>1 财务人员选择导出数据<br/>2 系统将筛选结果导出为excel到指定位置<br/>|
|扩展流程|3a 财务人员选择重新筛选<br/>&nbsp;&nbsp;1 系统清除筛选条件，回到第二步<br/>1-4a 财务人员选择其他功能<br/>&nbsp;&nbsp;1 系统退出查看销售明细表<br/>|
|特殊需求|1 各报表能够导出，默认位置可修改。<br/>2 时间精确到天|

### 4.15 查看经营状况表
|ID|15|名称|查看经营状况表|
|:--|:--|:--|:--|
|创建者|钱美缘|最后一次更新者|钱美缘|
|创建日期|2017.9.14|最后一次更新日期|2017.10.7|

|参与者|财务人员，目标是快速科学地了解公司的总体经营情况。<br/>总经理，目标是快速科学地了解公司的经营情况|
|:--|:--------------------------|
|触发条件|财务人员或者总经理需要了解公司的经营情况|
|前置条件|财务人员已被系统识别和授权<br/>总经理已被系统识别和授权|
|后置条件|无|
|优先级|低|
|正常流程|1.0 查看 <br/>1 财务人员选择查看经营状况表<br/>2 系统显示空白界面并提示选择时间范围<br/>3 财务人员选择时间范围并确认查看<br/>4 系统显示统计信息，包括收入类（销售收入、商品类收入）、支出类（销售成本、商品类支出）、利润。<br/>1.1 导出<br/>1 财务人员选择导出数据<br/>2 系统将筛选结果导出为excel到指定位置<br/>|
|扩展流程|1-4a 财务人员选择其他功能<br/>&nbsp;&nbsp;1 系统退出查看销售明细表<br/>|
|特殊需求|1 各报表能够导出，默认位置可修改。<br/>2 收入显示为折让后总收入，并显示折让金额。利润=折让后总收入-总支出。<br/>3 时间精确到天|

### 4.16 查看经营历程表
|ID|16|名称|查看经营历程表|
|:--|:--|:--|:--|
|创建者|钱美缘|最后一次更新者|钱美缘|
|创建日期|2017.9.14|最后一次更新日期|2017.9.27|

|参与者|财务人员，目标是快速地查看一段时间内的公司所有单据。<br/>总经理，目标是快速地查看一段时间内的公司所有单据。|
|:--|:--------------------------|
|触发条件|财务人员或总经理想要了解一段时间内的经营情况<br/>财务人员需要对单据进行红冲（并复制）操作|
|前置条件|财务人员已被系统识别和授权<br/>总经理已被系统识别和授权|
|后置条件|无|
|优先级|中|
|正常流程|1.0 单据筛选<br/>1 财务人员选择筛选条件，包括时间区间，单据类型，客户，业务员，仓库。<br/>2 系统显示出所有符合条件的单据<br/>1.1 查看单据<br/>1财务人员选择某单据<br/>2 系统显示单据的具体内容<br/>仅财务人员可以进行以下操作<br/>1.2 进行红冲操作<br/>1 系统生成同样但仅将数量取负数的单据入账<br/>1.3 进行红冲并复制操作<br/>1 系统红冲操作后生成同样的草稿单<br/>2 财务人员对此进行编辑<br/>3 系统保存编辑好的单子|
|扩展流程|<pre>1.3 进行红冲并复制操作<br/>2a 财务人员退出流程<br/>&nbsp;&nbsp;1 系统询问是否保存单据草稿<br/>&nbsp;&nbsp;&nbsp;&nbsp;1a 财务人员选择确认<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 系统保存单据为已提交状态<br/>&nbsp;&nbsp;&nbsp;&nbsp;1b 财务人员选择不保存退出<br/>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;1 系统清空单据内容不保存并退出</pre>|
|特殊需求|1 仅能查看单据，不可修改与删除<br/>2 时间精确到天|

### 4.17 期初建账
|ID|17|名称|期初建账|
|:--|:--|:--|:--|
|创建者|钱美缘|最后一次更新者|钱美缘|
|创建日期|2017.9.14|最后一次更新日期|2017.10.7|

|参与者|财务人员，目标是新建一套账并进行初始化操作|
|:--|:--------------------------|
|触发条件|到达期初需要建立一套新账|
|前置条件|财务人员已被系统识别和授权|
|后置条件|系统将新账储存并作为之后启动的初始状态|
|优先级|高|
|正常流程|1.0 期初建账操作<br/>1 财务人员添加商品信息、银行账户信息、客户信息（或者由上期账套自动结转）<br/>2 系统显示新账信息<br/>3 财务人员确认新账信息<br/>4 系统建立一套新账并保存<br/>1.1 查看初始状态信息<br/>1 财务人员选择查看初始状态<br/>2 系统显示初始的商品信息、银行账户信息、客户信息</pre>|
|扩展流程|<pre>1.0 期初建账操作<br/>3a 财务人员发现新账信息有误<br/>&nbsp;&nbsp;1 系统返回第一步，要求重新输入<br/>|
|特殊需求|1 商品信息包括商品分类，名称，类别，型号，进价/售价(默认为上年平均)，最近进价和最近售价留空<br/>2 客户信息包括客户分类，名称，联系方式等，应收应付(之前遗留)<br/>3 银行账户信息包括名称和余额<br/>4 系统支持建立多套账<br/>5 期初信息不会改变|

### 4.18 查看日志 ###
|ID|18|名称|查看日志|
|:--|:--|:--|:--|
|创建者|钱美缘|最后一次更新者|钱美缘|
|创建日期|2017.9.22|最后一次更新日期|2017.9.22|

|参与者|财务人员，目标是快速地查看一段时间内的系统操作记录。<br/>总经理，目标是快速地查看一段时间内的系统操作记录。|
|:--|:--------------------------|
|触发条件|财务人员或总经理想要了解一段时间内的系统操作记录|
|前置条件|财务人员已被系统识别和授权<br/>总经理已被系统识别和授权|
|后置条件|无|
|优先级|低|
|正常流程|1. 系统列表显示日志记录 <br/>2. 财务人员选择时间区间<br/>3. 系统显示筛选后的结果<br/>重复2-3步<br/>4 退出查看日志功能|
|扩展流程|无|
|特殊需求|无|


### 4.19 审批单据 ###
|ID|19|名称|审批单据|
|:--|:--|:--|:--|
|创建者|郝睿|最后一次更新者|郝睿|
|创建日期|2017.9.15|最后一次更新日期|2017.9.22|

|参与者|总经理，目标是快速地进行单据的查看、修改和审批|
|:--|:--|
|触发条件|无|
|前置条件|总经理必须已经被识别和授权|
|后置条件|系统更新修改或审批后的单据状态|
|优先级|高|
|正常流程|1. 总经理请求单据审批任务<br/>2. 系统显示待审批单据列表<br/>3. 总经理选择单据<br/>4. 系统显示单据信息<br/>5. 总经理查看单据内容<br/>6. 总经理进行单据审批<br/>7. 系统更新单据状态<br/>循环3-7直至所有待审批单据审批完|
|扩展流程|<pre>2-6a. 总经理选择退出单据审批任务<br/>&ensp;&ensp;&ensp;1. 系统退出单据审批任务<br/>6b. 总经理选择进行批量单据审批任务<br/>&ensp;&ensp;&ensp;1. 系统显示可供勾选的未审批单据列表<br/>&ensp;&ensp;&ensp;2. 总经理选择批量审批的单据<br/>6c. 总经理修改单据内容<br/>&ensp;&ensp;&ensp;a1. 总经理确认单据信息修改<br/>&ensp;&ensp;&ensp;b1. 总经理取消修改<br/>&ensp;&ensp;&ensp;b2. 返回正常流程5|
|特殊需求|无|

### 4.20 制定促销策略 ###
|ID|20|名称|制定促销策略|
|:--|:--|:--|:--|
|创建者|郝睿|最后一次更新者|郝睿|
|创建日期|2017.9.16|最后一次更新日期|2017.9.22|

|参与者|总经理，目标是针对不同级别用户制定合适的促销策略|
|:--|:--|
|触发条件|无|
|前置条件|总经理必须已经被识别和授权|
|后置条件|系统自动建立库存赠送单|
|优先级|高|
|正常流程|1. 总经理请求制定促销策略任务<br/>2. 系统显示已有促销策略<br/>3. 总经理选择新建促销策略<br/>4. 系统更新促销策略状态，建立库存赠送单|
|扩展流程|<pre>3b. 总经理选择查看已有促销策略<br/>&ensp;&ensp;&ensp;1. 系统显示所选促销策略的详细信息<br/>&ensp;&ensp;&ensp;2. （可选）总经理更改已有的促销策略<br/>3c. 总经理选择删除已有促销策略<br/>3d. 总经理选择退出制定促销策略任务<br/>&ensp;&ensp;&ensp;1.系统退出制定促销策略任务|
|特殊需求|<pre>1.  总经理可以制定针对不同总价的促销策略（赠品、 赠送代金劵)<br/>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;触发价格折让的初始档为1000,2000,5000；分别赠送200,500,1000的代金券，此后每增加5000元消费多赠送1000元代金券<br/>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;触发赠品赠送的初始档为200,500,1000；分别赠送价值50，100，200元的赠品。1000元以上总价每增加1000元，赠送的赠品的价格增加100元<br/>2. 总经理可以制定组合商品降价的特价包<br/>3. 总经理可以针对不同级别的用户制定促销策略（赠品、价格折让、 赠送代金劵）<br/>&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;待定<br/>注：所有触发赠品赠送送的总价均为折后价格|

### 4.21 用户管理 ###
|ID|21|名称|用户管理|
|:--|:--|:--|:--|
|创建者|万嘉雯|最后一次更新者|万嘉雯|
|创建日期|2017.9.22|最后一次更新日期|2017.10.8|

|参与者|系统管理员，目标是快速、便捷地管理该进销存系统的多方用户|
|:--|:--|
|触发条件|系统相关用户出现信息变更|
|前置条件|系统管理员必须已经被识别和授权。|
|后置条件|存储更新后的用户数据|
|优先级|高|
|正常流程|<pre>1.0查看系统用户信息<br/>1、系统管理员选择查找方式（按系统用户编号或者关键字，默认按编号）并输入相关系统用户编号或者关键字<br/>2、系统显示该系统用户信息，包括用户的编号、姓名、部门、权限级别、性别、年龄、电话、地址、电子邮箱<br/>2.0添加系统用户<br/>1、系统管理员请求添加新系统用户<br/>2、系统进入系统用户信息编辑界面<br/>3、系统管理员编辑系统用户信息并保存<br/>4、系统提示添加成功<br/>3.0更改系统用户信息<br/>1、系统管理员请求更改客户信息<br/>2、系统进入客户信息编辑界面<br/>3、系统管理员更改系统用户信息并保存<br/>4、系统提示更新成功<br/>4.0删除系统用户<br/>1、系统管理员选中待删除系统用户并选择删除<br/>2、系统询问是否确认删除<br/>3、系统管理员确认删除<br/>4、系统完成删除操作并更新系统用户列表以及保存删除结果</pre>|
|扩展流程|<pre>1.0-1a、按编号查询时系统用户编号不是以JHXS、CW、KC或JL开头<br/>&emsp;&emsp;1、系统提示正确的输入格式并拒绝此次输入<br/>1.0-1b、系统中无该客户<br/>&emsp;&emsp;1、系统提示该系统用户不存在并询问是否添加用户<br/>&emsp;&emsp;&emsp;&emsp;1a、系统管理员选择取消<br/>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;系统返回系统用户信息列表<br/>&emsp;&emsp;&emsp;&emsp;1b、系统管理员选择添加<br/>&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;返回正常流程2.0<br/>2.0-3a、系统用户已存在列表中<br/>&emsp;&emsp;1、系统提示该客户已存在并拒绝执行此次添加<br/>4.0-1a、该用户有事务未处理完成<br/>&emsp;&emsp;1、系统提示该系统用户尚有事务未处理完成并提醒谨慎删除</pre>|
|特殊需求|无|