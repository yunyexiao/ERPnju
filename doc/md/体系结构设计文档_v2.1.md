灯具进销存管理系统体系结构设计文档_v2.1
===
变更记录
---
|修改人员|日期|变更原因|版本号|
|:--|:--|:--|:--|
|钱美缘|2017.10.12|文档结构框架|v1.0|
|全员|2017.10.22|第一版|v2.0|
|钱美缘|2017.10.23|添加开发包表，修改了部分示意图|v2.1|

目录
---

## 1 引言
### 1.1 编制目的
本报告详细完成对灯具进销存管理系统的概要设计，从而达到指导详细设计和开发的目的，同时实现和测试人员以及用户的沟通。  
本报告面向开发人员、测试人员和用户编写，是了解系统的导航  

### 1.2 词汇表
|词汇名称|词汇含义|备注|
|---|---|---|
|ERP|进销存管理系统|无|

### 1.3 参考资料
* 灯具进销存系统用例文档_v2.0
* 灯具进销存系统需求规格说明文档_v1.0  

## 2 产品描述
参考灯具进销存系统用例文档和灯具进销存需求规格说明文档中对产品的概括描述。

## 3 逻辑视角
灯具进销存管理系统中，选择了分层体系结构风格，将系统分为三层（展示层、业务逻辑层、数据层）能够很好地示意整个高层抽象。展示层包含GUI界面的实现，业务逻辑层包含业务逻辑处理的实现，数据层负责数据的持久化和访问。分层体系结构的逻辑视角和逻辑设计方案如下图所示。  
<center>![](doc/img/StructureDiagrams/packagePic1.png)</center>  
<center>图3-1：逻辑视角图</center>
<center>![](doc/img/StructureDiagrams/packagePic2.png)</center>
<center>图3-2：逻辑设计方案图</center>

## 4 组合视角
### 4.1 开发包图
灯具进销存系统的具体开发包图如下表所示  

|开发（物理）包|依赖的其他开发包|
|:--|:--|
|mainui|analysisui,billui,initui,userui,commodityui,accountui,customerui,promotionui,loginui,vo|
|analysisui|analysisblservice, 界面类库包, vo|
|analysisblservice||
|analysisbl|analysisblservice, categorydataservice,  billbl, logbl, po|
|categorydataservice|Java RMI, po|
|categorydata|categorydataservice, po|
|billui|billblservice, 界面类库包, vo|
|billblservice||
|billbl|billblservice, billdataservice, commoditybl, accountbl, customerbl, promotionbl, logbl, po|
|billdataservice|Java RMI, po|
|billdata|billdataservice, po|
|initui|initblservice, 界面类库包, vo|
|initblservice||
|initbl|initblservice, initdataservice, commoditybl, accountbl, customerbl, logbl, po|
|initdataservice|Java RMI, po|
|initdata|initdataservice, po|
|userui|userblservice, 界面类库包, vo|
|userblservice||
|userbl|userblservice, userdataservice, logbl, po|
|userdataservice|Java RMI, po|
|userdata|userdataservice, po|
|commodityui|commodityblservice, 界面类库包, vo|
|commodityblservice||
|commoditybl|commodityblservice, commoditydataservice, categorydataservice, logbl, po|
|commoditydataservice|Java RMI, po|
|commoditydata|commoditydataservice, po|
|customerui|customerblservice, 界面类库包, vo|
|customerblservice||
|customerbl|customerblservice, customerdataservice, logbl, po|
|customerdataservice|Java RMI, po|
|customerdata|customerdataservice, po|
|promotionui|promotionblservice, 界面类库包, vo|
|promotionblservice||
|promotionbl|promotionblservice, promotiondataservice, logbl, po|
|promotiondataservice|Java RMI, po|
|promotiondata|promotiondataservice, po|
|logui|logblservice, 界面类库包, vo|
|logblservice||
|logbl|logblservice, logdataservice, po|
|logdataservice|Java RMI, po|
|logdata|logdataservice, po|
|vo||
|po||
|界面类库包||
|Java RMI||

下图为灯具进销存系统的客户端开发包图  
<center>![](doc/img/StructureDiagrams/packagePic3.png) </center> 
<center>图4-1-1：客户端的开发包图</center>
下图为灯具进销存系统的服务器端开发包图  
<center>![](doc/img/StructureDiagrams/packagePic4.png)  </center>
<center>图4-1-2：服务器端的开发包图</center>

### 4.2 运行时进程
在灯具进销存管理系统中，会同时存在多个客户端进程和一个服务器端进程，其进程图如下图所示。结合部署图，客户端是在客户端机器上运行，服务器端进程是在服务器端机器上运行。  
<center>![](doc/img/StructureDiagrams/processPic.png)</center>
<center>图4-2-1：运行时进程图</center>
  
### 4.3 物理部署
灯具进销存管理系统中的客户端构件是放在客户端机器上，服务器端构件是放在服务器端机器上的。在客户端节点上，还要部署Java RMI构件。由于Java RMI构件属于JDK1.8的一部分。所以，在系统JDK环境已经设置好的前提下，不需要再独立部署。部署图如下图所示。
<center>![](doc/img/StructureDiagrams/deployPic.png)</center>
<center>图4-3-1：物理部署图</center>

## 5 接口视角
### 5.1 模块的职责
下图为客户端的模块视图  
<center>![](doc/img/StructureDiagrams/clientModel.png)</center>  
<center>图5-1-1：客户端的模块视图</center>
下图为服务器端的模块视图   
<center>![](doc/img/StructureDiagrams/serverModel.png) </center> 
<center>图5-1-2：服务器端的模块视图</center>

下表为客户端各层的职责  

|层|职责|
|---|---|
|启动模块|负责初始化网络通信机制，启动用户界面|
|展示层|基于窗口化界面的灯具进销存管理系统客户端用户界面|
|业务逻辑层|对用户界面的输入进行响应并进行业务逻辑处理|
|客户端网络模块|利用Java RMI机制查找RMI服务|

下表为服务器端各层的职责  

|层|职责|
|---|---|
|启动模块|负责初始化网络通信机制，启动用户界面|
|数据层|负责数据的持久化和访问接口|
|服务器端网络通信模块|利用Java RMI机制开启RMI服务，注册RMI服务|

每一层只使用下方直接接触的层。层与层之间仅仅通过接口的调用来完成。层之间的接口如下表所示：

|接口|服务调用方|服务提供方|
|---|---|---|
|analysisblservice<br/>commodityblservice<br/>accountblservice<br/>customerblservice<br/>billblservice<br/>initblservice<br/>promotionblservice<br/>userblservice<br/>logblservice<br/>|客户端展示层|客户端业务逻辑层|
|categorydataservice<br/>commoditydataservice<br/>accountdataservice<br/>customerdataservice<br/>billdataservice<br/>initdataservice<br/>promotiondataservice<br/>userdataservice<br/>logdataservice<br/>|客户端业务逻辑层|服务端数据层|

### 5.2 用户界面层的分解
根据需求，系统存在26个用户界面：进销存系统登录界面，系统管理人员主界面，库存管理人员主界面，进货销售人员主界面，财务人员主界面，总经理主界面，用户账户管理界面，商品分类管理界面，商品管理界面，库存管理界面，库存调整界面，客户管理界面，制定进货单界面，制定进货退货单界面，制定销售单界面，制定销售退货单界面，银行账户管理界面，制定收付款单界面，制定现金费用单界面，期初建账界面，查看日志界面，查看销售明细表界面，查看经营状况表界面，查看经营历程表界面，审批单据界面，制定促销策略界面。界面跳转如图5-2-1所示。  

<center>![](doc/img/StructureDiagrams/viewJump.png)</center>
<center> 图5-2-1用户界面跳转</center>
服务器端和客户的用界面设计接口是一致的，只是具体的页面不一样。
  
用户界面类如图5-2-2所示
<center>![](doc/img/StructureDiagrams/userview.png)</center>
<center> 图5-2-2用户界面类</center>
</br>
#### 5.2.1 用户界面层的职责
如表5-2-1所示为用户界面层模块的职责<br/>
<table>
<caption> 表5-2-1用户界面层模块的职责 </caption>
    <tr>
        <td><strong><div class="text" style=" text-align:center;">模块</div></strong></td>
        <td><strong><div class="text" style=" text-align:center;">职责</div></strong></td>
    </tr>
    <tr>
        <td>MainFrame</td>
        <td>界面Frame，负责界面的显示和界面的跳转</td>
    </tr>

</table>
</br>
#### 5.2.2 用户界面层模块的接口规范
用户界面层模块的接口规范如表5-2-2-1所示<br/>
<table>
<caption>表5-2-2-1用户界面层模块的接口规范</caption>  
    <tr>
        <td rowspan="3">MainFrame</td>
        <td>语法</td>
        <td>init(args:String[])</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>无</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>显示Frame以及LoginPanel</td>
    </tr>
   
</table>

用户界面层需要的服务接口如表5-2-2-2所示<br/>
<table>
<caption>表5-2-2-2用户界面层模块需要的服务接口</caption>  
<tr>
        <td><strong><div class="text" style=" text-align:center;">服务名</div></strong></td>
        <td><strong><div class="text" style=" text-align:center;">服务</div></strong></td>
    </tr>
    <tr>
        <td>UserBLService.login(String id, String password)</td>
        <td>登录界面的业务逻辑接口</td>
    </tr><tr>
        <td>*BLService</td>
        <td>每个界面都有一个相应的业务逻辑接口</td>
    </tr>
   
</table>
#### 5.2.3 用户界面模块的设计原理
用户界面利用java的Swing和AWT库来实现  

### 5.3 业务逻辑层的分解
业务逻辑层包括多个针对界面的业务逻辑处理对象。 
#### 5.3.1 业务逻辑层模块的职责
<table>
<caption> 表8 业务逻辑层模块的职责 </caption>
    <tr>
        <td><strong><div class="text" style=" text-align:center;">模块</div></strong></td>
        <td><strong><div class="text" style=" text-align:center;">职责</div></strong></td>
    </tr>
    <tr>
        <td>analysisbl</td>
        <td>负责实现经营状况统计分析查看界面所需要的服务</td>
    </tr>
    <tr>
        <td>billbll</td>
        <td>负责实现单据操作界面所需要的服务</td>
    </tr>
    <tr>
        <td>initbl</td>
        <td>负责期初建账界面所需要的服务</td>
    </tr>
    <tr>
        <td>userbl</td>
        <td>负责系统用户管理界面所需要的服务</td>
    </tr>
    <tr>
        <td>commoditybl</td>
        <td>负责商品管理界面所需要的服务</td>
    </tr>
    <tr>
        <td>accountbl</td>
        <td>负责银行账户管理界面所需要的服务</td>
    </tr>
    <tr>
        <td>customerbl</td>
        <td>负责客户管理界面所需要的服务</td>
    </tr>
    <tr>
        <td>promotionbl</td>
        <td>负责促销策略管理界面所需要的服务</td>
    </tr>
    <tr>
        <td>logbl</td>
        <td>负责日志界面所需要的服务</td>
    </tr>
</table>
#### 5.3.2 业务逻辑层模块的接口规范
<table>
<caption>表9 Userbl模块的接口规范</caption>  
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的服务（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">User.getUserInfo</td>
        <td>语法</td>
        <td>public UserVO getUserInfo(string id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动系统用户管理任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回查询的系统用户的结果</td>
    </tr>
    <tr>
        <td rowspan="3">User.addUser</td>
        <td>语法</td>
        <td>public ResultMessage addUser(UserVO user_info)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动系统用户管理任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>增加新的系统用户，持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">User.updateUserInfo</td>
        <td>语法</td>
        <td>public ResultMessage updateUserInfo(UserVO user_info)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>用户已添加到系统中</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">User.deleteUser</td>
        <td>语法</td>
        <td>public ResultMessage deleteUser(string id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>用户已添加到系统中</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除特定系统用户，持久化更新所涉及的数据</td>
    </tr>
</table>

<table>
    <tr>
        <td colspan="2"><strong><div class="text" style=" text-align:center;">需要的接口（需接口）</div></strong></td>
    </tr>
    <tr>
        <td>服务名</td>
        <td>服务</td>
    </tr>
    <tr>
        <td>UserDataService.generateId()</td>
        <td>生成一条与之前不同的系统用户编号</td>
    </tr>
    <tr>
        <td>UserDataService.findById(string id)</td>
        <td>根据id查找单一持久化对象</td>
    </tr>
    <tr>
        <td>UserDataService.findByKeyWord(String keyWord)</td>
        <td>根据字段名和值进行查找多个持久化对象</td>
    </tr>
     <tr>
        <td>UserDataService.add(UserPO upo)</td>
        <td>插入单一持久化对象</td>
    </tr>
     <tr>
        <td>UserDataService.delete(String id)</td>
        <td>删除单一持久化对象</td>
    </tr>
    <tr>
        <td>UserDataService.multiplyDelete(List<String> ids)</td>
        <td>删除多个持久化对象</td>
    </tr>
    <tr>
        <td>UserDataService.modify(UserPO upo)</td>
        <td>更新单一持久化对象</td>
    </tr>
     <tr>
        <td>LogDataService.write(List&ltLogPO> lpos)</td>
        <td>添加多个持久化LogPO记录</td>
    </tr>
</table>

<table>
<caption><div class="text" style=" text-align:center;">表10 Customerbl模块的接口规范</div></strong> </caption>  
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的服务（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">Customer.getCustomerInfo</td>
        <td>语法</td>
        <td>public CustomerVO getCustomerInfo(string id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动客户管理任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回查询的客户信息的结果</td>
    </tr>
    <tr>
        <td rowspan="3">Customer.addCustomer</td>
        <td>语法</td>
        <td>public ResultMessage addCustomer(CustomerVO cus_info)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动客户管理任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>增加新的客户，持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Customer.updateCustomerInfo</td>
        <td>语法</td>
        <td>public ResultMessage updateCustomerInfo(CustomerVO cus_info)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>客户已添加到系统中</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Customer.deleteCustomer</td>
        <td>语法</td>
        <td>public ResultMessage deleteCustomer(string id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>客户已添加到系统中</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除特定客户，持久化更新所涉及的数据</td>
    </tr>
</table>

<table>
    <tr>
        <td colspan="2"><strong><div class="text" style=" text-align:center;">需要的接口（需接口）</div></strong></td>
    </tr>
    <tr>
        <td>服务名</td>
        <td>服务</td>
    </tr>
    <tr>
        <td>CustomerDataService.generateId()</td>
        <td>生成一条与之前不同的客户编号</td>
    </tr>
    <tr>
        <td>CustomerDataService.findById(string id)</td>
        <td>根据id查找单一持久化对象</td>
    </tr>
    <tr>
        <td>CustomerDataService.findByKeyWord(String keyWord)</td>
        <td>根据字段名和值进行查找多个持久化对象</td>
    </tr>
     <tr>
        <td>CustomerDataService.add(CustomerPO cpo)</td>
        <td>插入单一持久化对象</td>
    </tr>
     <tr>
        <td>CustomerDataService.delete(String id)</td>
        <td>删除单一持久化对象</td>
    </tr>
    <tr>
        <td>CustomerDataService.multiplyDelete(List<String> ids)</td>
        <td>删除多个持久化对象</td>
    </tr>
    <tr>
        <td>CustomerDataService.modify(CustomerPO cpo)</td>
        <td>更新单一持久化对象</td>
    </tr>
     <tr>
        <td>LogDataService.write(List&ltLogPO> lpos)</td>
        <td>添加多个持久化LogPO记录</td>
    </tr>
</table>

<table>
<caption>表11 Billbl模块的接口规范 </caption> 
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的接口（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">Bill.chooseBillType</td>
        <td>语法</td>
        <td>public long chooseBillType(string type)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>开始新建单据任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回单据排号</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.getCommodityList</td>
        <td>语法</td>
        <td>public void getCommodityList();<div>public void getCommidtyList(string name)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已创建销售类单据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>进入商品选择界面</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.getCommodityInfo</td>
        <td>语法</td>
        <td>public CommodityVO getCommodityInfo(string commodity_id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已填写销售类单据基本信息，销售商、供货商、业务员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回商品详细信息</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.addCommodity</td>
        <td>语法</td>
        <td>public ResultMessage addCommodity(CommodityVO com_info)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已填写销售类单据基本信息：销售商、供货商、业务员</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>添加商品到已选列表</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.calculateOneCommodity</td>
        <td>语法</td>
        <td>public double calculateOneCommodity(string commodity_id,long quantity)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已选择商品名称并填写商品数量</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回单项商品的金额总计</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.deleteCommodity</td>
        <td>语法</td>
        <td>public ResultMessage deleteCommodity(string commodity_id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已添加该商品至已选列表</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回删除结果</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.addRemark</td>
        <td>语法</td>
        <td>public void addRemark(string remark)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已选择商品名称</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>备注录入</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.calculateTotal</td>
        <td>语法</td>
        <td>public double calculateTotal(double commodity_sum[100],int num);<div>public double calculateTotal(double commodity_sum[100],int num,double discount,long coupon)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已完成商品添加</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回单据总金额</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.cancel</td>
        <td>语法</td>
        <td>public void cancel()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已新建单据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>撤销单据</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.finish</td>
        <td>语法</td>
        <td>public void finish()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已完成单据所有信息填写</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>结束单据制定，持久化更新涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.addTransferRecord</td>
        <td>语法</td>
        <td>public ResultMessage addTransferRecord(RecordVO rec_info)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已新建财务类单据并录入表单信息</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回添加信息</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.calculateTransfer</td>
        <td>语法</td>
        <td>public double calculateTransfer(double record[100], int num)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已完成资金流动记录添加</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回该单据总计金额</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.deleteRecord</td>
        <td>语法</td>
        <td>public ResultMessage deleteRecord(string record_id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已添加记录</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>完成删除，更新资金流动记录列表</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.saveDraft</td>
        <td>语法</td>
        <td>public void saveDraft(string billid)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已新建一张单据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>存储单据草稿</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.alarmStockOverflow</td>
        <td>语法</td>
        <td>public void alarmStockOverflow(string commodity_id, long num)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已新建库存类单据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>存储报溢信息</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.alarmStockLoss</td>
        <td>语法</td>
        <td>public void alarmStockLoss(string commodity_id, long num)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已新建库存类单据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>存储报损信息</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.setStockPresent</td>
        <td>语法</td>
        <td>public void setStockPresent(string commodity_id, long num)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已新建库存类单据</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>存储库存商品赠送信息</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.getStockRemainAlarm</td>
        <td>语法</td>
        <td>public ResultMessage getStockRemainAlarm(string commodity_id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>已设置商品库存警戒值</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回商品库存警戒信息</td>
    </tr>
    <tr>
        <td rowspan="3">Bill.examine</td>
        <td>语法</td>
        <td>public ResultMessage examine(string bill_id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>单据为待审批状态</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>更改单据状态为已通过或者未通过</td>
    </tr>
    
     <tr>
        <td rowspan="3">Bill.lookUp</td>
        <td>语法</td>
        <td>public ArrayList<BillVO> lookUp(string select_condition)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>操作人员已被授权</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回查询的单据信息结果</td>
    </tr>
    
    <tr>
        <td rowspan="3">Bill.modify</td>
        <td>语法</td>
        <td>public ResultMessage modify(string alter_info)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>操作人员已被授权</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回修改的结果信息，持久化更新相关数据</td>
    </tr>
    
    <tr>
        <td rowspan="3">Bill.delete</td>
        <td>语法</td>
        <td>public ResultMessage delete(string bill_id)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>操作人员已被授权</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回删除单据的结果信息</td>
    </tr>
</table>

<table>
    <tr>
        <td colspan="2">需要的接口（需接口）</td>
    </tr>
    <tr>
        <td>服务名</td>
        <td>服务</td>
    </tr>
    <tr>
        <td>BillDataService.generateId(BillType type)</td>
        <td>根据单据类型排序生成单号</td>
    </tr>
    <tr>
        <td>BillDataService.findById(string id)</td>
        <td>根据id查找单一持久化对象</td>
    </tr>
    <tr>
        <td>BillDataService.findByKeyWord(String keyWord)</td>
        <td>根据字段名和值进行查找多个持久化对象</td>
    </tr>
     <tr>
        <td>BillDataService.add(BillPO bpo)</td>
        <td>插入单一持久化对象</td>
    </tr>
     <tr>
        <td>BillDataService.delete(String id)</td>
        <td>删除单一持久化对象</td>
    </tr>
    <tr>
        <td>BillDataService.multiplyDelete(List<String> ids)</td>
        <td>删除多个持久化对象</td>
    </tr>
    <tr>
        <td>BillDataService.modify(BillPO bpo)</td>
        <td>更新单一持久化对象</td>
    </tr>
    <tr>
        <td>BillDataService.showNotPassed()</td>
        <td>得到所有未被审核通过的BillPO记录</td>
    </tr>
     <tr>
        <td>BillDataService.showPassed()</td>
        <td>得到所有已被审核通过的BillPO记录</td>
    </tr>
    <tr>
        <td>BillDataService.showAll()</td>
        <td>得到所有BillPO记录</td>
    </tr>
    <tr>
        <td>BillDataService.showNotPassedByType(BillType type)</td>
        <td>得到所有对应种类的未通过审核的单据PO记录</td>
    </tr>
     <tr>
        <td>BillDataService.showPassedByType(BillType type)</td>
        <td>得到所有对应种类的通过审核的单据PO记录</td>
    </tr>
     <tr>
        <td>BillDataService.showAllByType(BillType type)</td>
        <td>得到所有该种类的单据PO记录</td>
    </tr>
     <tr>
        <td>BillDataService.pass(string bill_id)</td>
        <td>设置单据的PO记录为通过审核状态</td>
    </tr>
     <tr>
        <td>BillDataService.multiplePass(string[] bill_id)</td>
        <td>设置多条单据的PO记录为通过审核状态</td>
    </tr>
    <tr>
        <td>CommodityDataService.showAll()</td>
        <td>得到所有商品信息列表</td>
    </tr>
    <tr>
        <td>CommodityDataService.findById(string id)</td>
        <td>得到单一持久化CommodityPO记录</td>
    </tr>
    <tr>
        <td>CommodityDataService.findByName(string name)</td>
        <td>得到多条持久化CommodityPO记录</td>
    </tr>
   <td>CommodityDataService.modify(string name)</td>
        <td>更新单一持久化CommodityPO记录</td>
    </tr>
     <tr>
        <td>LogDataService.write(List&ltLogPO> lpos)</td>
        <td>添加多个持久化LogPO记录</td>
    </tr>
</table>

<table>
<caption>表12 Accountbl模块的接口规范 </caption>  
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的服务（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">Account.getAccountInfo</td>
        <td>语法</td>
        <td>public AccountVO getAccountInfo(string name)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>登录成功并启动银行账户管理任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回查询的银行账户信息的结果</td>
    </tr>
    <tr>
        <td rowspan="3">Account.addAccount</td>
        <td>语法</td>
        <td>public ResultMessage addAccount(AccountVO acc_info)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>登录成功并启动银行账户管理任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>增加新的银行账户，持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Account.updateAccountInfo</td>
        <td>语法</td>
        <td>public ResultMessage updateAccountInfo(AccountVO acc_info)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>此银行账户已创建</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Account.deleteAccount</td>
        <td>语法</td>
        <td>public ResultMessage deleteAccount(string name)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>次银行账户已添加到系统中</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除此银行账户，持久化更新所涉及的数据</td>
    </tr>
</table>

<table>
    <tr>
        <td colspan="2">需要的接口（需接口）</td>
    </tr>
    <tr>
        <td>服务名</td>
        <td>服务</td>
    </tr>
    <tr>
        <td>AccountDataService.generateId()</td>
        <td>得到与之前不同的银行账户编号</td>
    </tr>
    <tr>
        <td>AccountDataService.findById(string id)</td>
        <td>根据id查找单一持久化AccountPO记录</td>
    </tr>
    <tr>
        <td>AccountDataService.findByName(String Name)</td>
        <td>根据字段名和值进行查找多个持久化AccountPO记录</td>
    </tr>
     <tr>
        <td>AccountDataService.add(AccountPO apo)</td>
        <td>插入单一持久化AccountPO记录</td>
    </tr>
     <tr>
        <td>AccountDataService.delete(String id)</td>
        <td>删除单一持久化AccountPO记录</td>
    </tr>
    <tr>
        <td>AccountDataService.multiplyDelete(List<String> ids)</td>
        <td>删除多个持久化AccountPO记录</td>
    </tr>
    <tr>
        <td>AccountDataService.modify(AccountPO apo)</td>
        <td>更新单一持久化AccountPO记录</td>
    </tr>
     <tr>
        <td>LogDataService.write(List&ltLogPO> lpos)</td>
        <td>添加多个持久化LogPO记录</td>
    </tr>
</table>


<table>
<caption>表13 Commoditybl模块的接口规范 </caption>  
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的服务（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">Commodity.getInfo</td>
        <td>语法</td>
        <td>public CommodityVO getInfo(string name)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动商品管理任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回查询商品信息的结果</td>
    </tr>
    <tr>
        <td rowspan="3">Commodity.add</td>
        <td>语法</td>
        <td>public ResultMessage add(CommodityVO com_info)；<div>public ResultMessage add(string fathercato, string newcato)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动商品管理任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>增加新商品，持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Commodity.updateInfo</td>
        <td>语法</td>
        <td>public ResultMessage updateInfo(string oldcato, string newcato)；<div>public ResultMessage updateInfo(CommodityVO com_info)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>商品存在</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Commodity.delete</td>
        <td>语法</td>
        <td>public ResultMessage delete(string name)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>商品存在</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除商品，返回删除信息，持久化更新所涉及的数据</td>
    </tr>
    
     <tr>
        <td rowspan="3">Commodity.lookupStock</td>
        <td>语法</td>
        <td>public ArrayList<StockVO> lookupStock(string begin_time, string end_time)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>操作人员已被授权</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回查看的商品库存结果</td>
    </tr>
    
     <tr>
        <td rowspan="3">Commodity.dayCheckStock</td>
        <td>语法</td>
        <td>public ArrayList<StockCommodityVO> dayCheckStock()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>操作人员已被授权</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所查询库存情况</td>
    </tr>
    
    
</table>

<table>
    <tr>
        <td colspan="2">需要的接口（需接口）</td>
    </tr>
    <tr>
        <td>服务名</td>
        <td>服务</td>
    </tr>
    <tr>
        <td>CommodityDataService.generateId()</td>
        <td>得到与之前不同的商品编号</td>
    </tr>
    <tr>
        <td>CommodityDataService.findById(string id)</td>
        <td>根据id查找单一持久化CommodityPO记录</td>
    </tr>
    <tr>
        <td>CommodityDataService.findByName(String Name)</td>
        <td>根据字段名和值进行查找多个持久化CommodityPO记录</td>
    </tr>
     <tr>
        <td>CommodityDataService.add(CommodityPO cpo)</td>
        <td>插入单一持久化CommodityPO记录</td>
    </tr>
     <tr>
        <td>CommodityDataService.delete(String id)</td>
        <td>删除单一持久化CommodityPO记录</td>
    </tr>
    <tr>
        <td>CommodityDataService.multiplyDelete(List<String> ids)</td>
        <td>删除多个持久化CommodityPO记录</td>
    </tr>
    <tr>
        <td>CommodityDataService.modify(CommodityPO cpo)</td>
        <td>更新单一持久化CommodityPO记录</td>
    </tr>
    <tr>
        <td>CategoryDataService.generateId()</td>
        <td>得到与之前不同的商品分类编号</td>
    </tr>
    <tr>
        <td>CategoryDataService.findById(string id)</td>
        <td>根据id查找单一持久化CategoryPO记录</td>
    </tr>
    <tr>
        <td>CategoryDataService.findByName(String name)</td>
        <td>根据字段名和值进行查找多个持久化CategoryPO记录</td>
    </tr>
     <tr>
        <td>CategoryDataService.add(CategoryPO cpo)</td>
        <td>插入单一持久化CategoryPO记录</td>
    </tr>
     <tr>
        <td>CategoryDataService.delete(String id)</td>
        <td>删除单一持久化CategoryPO记录</td>
    </tr>
    <tr>
        <td>CategoryDataService.multiplyDelete(List<String> ids)</td>
        <td>删除多个持久化CategoryPO记录</td>
    </tr>
    <tr>
        <td>CategoryDataService.modify(CategoryPO cpo)</td>
        <td>更新单一持久化CategoryPO记录</td>
    </tr>
     <tr>
        <td>LogDataService.write(List&ltLogPO> lpos)</td>
        <td>添加多个持久化LogPO记录</td>
    </tr>
</table>

<table>
<caption>表14 Promotionbl模块的接口规范 </caption>  
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的服务（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">Promotion.getInfo</td>
        <td>语法</td>
        <td>public PromotionStrategyVO getInfo(string name)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动促销策略制定任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所查询的促销策略的详细信息</td>
    </tr>
    <tr>
        <td rowspan="3">Promotion.new</td>
        <td>语法</td>
        <td>public ResultMessage new(PromotionStrategyVO new_strategy)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动销售策略制定任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>增加新销售策略，持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Promotion.updateInfo</td>
        <td>语法</td>
        <td>public ResultMessage updateInfo(PromotionStrategyVO strategy)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>此促销策略存在</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Promotion.delete</td>
        <td>语法</td>
        <td>public ResultMessage delete(PromotionStrategyVO strategy)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>此促销策略存在</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>删除促销策略，返回删除信息，持久化更新所涉及的数据</td>
    </tr>
</table>

<table>
    <tr>
        <td colspan="2">需要的接口（需接口）</td>
    </tr>
    <tr>
        <td>服务名</td>
        <td>服务</td>
    </tr>
   <tr>
        <td>PromotionDataService.generateId()</td>
        <td>得到与之前不同的促销策略编号</td>
    </tr>
    <tr>
        <td>PromotionDataService.findById(string id)</td>
        <td>根据id查找单一持久化PromotionPO记录</td>
    </tr>
    <tr>
        <td>PromotionDataService.findByName(String name)</td>
        <td>根据字段名和值进行查找多个持久化PromotionPO记录</td>
    </tr>
     <tr>
        <td>PromotionDataService.add(PromotionPO ppo)</td>
        <td>插入单一持久化PromotionPO记录</td>
    </tr>
     <tr>
        <td>PromotionDataService.delete(String id)</td>
        <td>删除单一持久化PromotionPO记录</td>
    </tr>
    <tr>
        <td>PromotionDataService.multiplyDelete(List<String> ids)</td>
        <td>删除多个持久化PromotionPO记录</td>
    </tr>
    <tr>
        <td>PromotionDataService.modify(PromotionPO ppo)</td>
        <td>更新单一持久化PromotionPO记录</td>
    </tr>
    <tr>
        <td>PromotionDataService.showAll()</td>
        <td>得到所有持久化PromotionPO记录</td>
    </tr>
     <tr>
        <td>LogDataService.write(List&ltLogPO> lpos)</td>
        <td>添加多个持久化LogPO记录</td>
    </tr>
</table>


<table>
<caption>表15 Inibl模块的接口规范 </caption>  
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的服务（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">Init.create</td>
        <td>语法</td>
        <td>public ResultMessage create(InitPO init_info)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>启动期初建账定任务</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>保存期初建账结果，持久化更新所涉及的数据</td>
    </tr>
    <tr>
        <td rowspan="3">Init.check</td>
        <td>语法</td>
        <td>public InitVO check(string year)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>期初建账已完成</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回查询结果</td>
    </tr>
</table>

<table>
    <tr>
        <td colspan="2">需要的接口（需接口）</td>
    </tr>
    <tr>
        <td>服务名</td>
        <td>服务</td>
    </tr>
    <tr>
        <td>InitDataService.get(string year)</td>
        <td>得到对应年度的持久化InitPO记录</td>
    </tr>
    <tr>
        <td>InitDataService.set(InitPO ipo)</td>
        <td>添加单一持久化InitPO记录</td>
    </tr>
    <tr>
        <td>BillDataService.findByKeyWord(string keyWord)</td>
        <td>根据关键字查找多个持久化BillPO记录</td>
    </tr>
     <tr>
        <td>LogDataService.write(List&ltLogPO> lpos)</td>
        <td>添加多个持久化LogPO记录</td>
    </tr>
</table>

<table>
<caption>表16 Analysisbl模块的接口规范 </caption>  
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的服务（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">Analysis.getSaleDetails</td>
        <td>语法</td>
        <td>public ArrayList<SaleDetailVO> getSaleDetails(string scope)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>操作人员已被授权</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所查询的销售明细的详细信息</td>
    </tr>
    <tr>
        <td rowspan="3">Analysis.getOperateCondition</td>
        <td>语法</td>
        <td>public OperationConditionVO getOperateCondition(string start_time, string end_time)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>操作人员已被授权</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所查询的经营状况的详细信息</td>
    </tr>
    <tr>
        <td rowspan="3">Analysis.lookUpBills</td>
        <td>语法</td>
        <td>public Arraylist<BillVO> lookUpBills(string select_condition)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>操作人员已被授权</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所查询的单据的信息</td>
    </tr>
    <tr>
        <td rowspan="3">analysis.offset</td>
        <td>语法</td>
        <td>public ResultMessage offset(string bill_id, boolean copy)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>有待冲销的账款</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回冲销操作的结果信息，持久化更新所涉及的数据</td>
    </tr>
</table>

<table>
    <tr>
        <td colspan="2">需要的接口（需接口）</td>
    </tr>
    <tr>
        <td>服务名</td>
        <td>服务</td>
    </tr>
    <tr>
        <td>BillDataService.findByKeyWord(String keyWord)</td>
        <td>根据字段名和值进行查找多个持久化BillPO记录</td>
    </tr>
     <tr>
        <td>LogDataService.write(List&ltLogPO> lpos)</td>
        <td>添加多个持久化LogPO记录</td>
    </tr>

</table>


<table>
<caption>表17 Logbl模块的接口规范 </caption>  
    <tr>
        <td colspan="3"><strong><div class="text" style=" text-align:center;">提供的服务（供接口）</div></strong></td>
    </tr>
    <tr>
        <td rowspan="3">Log.lookUp</td>
        <td>语法</td>
        <td>public LogVO lookUp(string start_time, string end_time)</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td> 操作人员已被授权  </td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>返回所查看的结果信息</td>
    </tr>
    <tr>
        <td rowspan="3">Log.exit</td>
        <td>语法</td>
        <td>public void exit()</td>
    </tr>
    <tr>
        <td>前置条件</td>
        <td>查询已完成</td>
    </tr>
    <tr>
        <td>后置条件</td>
        <td>结束任务</td>
    </tr>
</table>
<table>
    <tr>
        <td colspan="2">需要的接口（需接口）</td>
    </tr>
    <tr>
        <td>服务名</td>
        <td>服务</td>
    </tr>
    <tr>
        <td>LogDataService.getByTime(String time)</td>
        <td>得到多个持久化LogPO记录</td>
    </tr>
    <tr>
        <td>LogDataService.getAll()</td>
        <td>得到全部持久化LogPO记录</td>
    </tr>
</table>

### 5.4 数据层的分解
#### 5.4.1 数据层模块的职责
<table border=3>
  <caption align="center" >数据层模块的职责</caption>
  <th align="center" >模块</th><th align="center" >职责</th>
  <tr>
  <td>categoryDataService</td>
  <td>基于序列化文件的持久化数据接口,提供categoryPO的集体载入、集体保存、增删改查服务</td>
  <tr>
  <td>commodityDataService</td>
  <td>基于序列化文件的持久化数据接口,提供commodityPO的集体载入、集体保存、增删改查服务</td>
  <tr>
  <td>accountDataService</td>
  <td>基于序列化文件的持久化数据接口,提供accountPO的集体载入、集体保存、增删改查服务</td>
  <tr>
  <td>customerDataService</td>
  <td>基于序列化文件的持久化数据接口,提供customerPO的集体载入、集体保存、增删改查服务</td>
  <tr>
  <td>billDataService</td>
  <td>基于序列化文件的持久化数据接口,提供billPO的集体载入、集体保存、增删改查服务</td>
  <tr>
  <td>initDataService</td>
  <td>基于序列化文件的持久化数据接口,提供initPO的集体载入、集体保存、增删改查服务</td>
  <tr>
  <td>promotionDataService</td>
  <td>基于序列化文件的持久化数据接口,提供promotionPO的集体载入、集体保存、增删改查服务</td>
  <tr>
  <td>userDataService</td>
  <td>基于序列化文件的持久化数据接口,提供userPO的集体载入、集体保存、增删改查服务</td>
  <tr>
  <td>logDataService</td>
  <td>基于序列化文件的持久化数据接口,提供logPO的集体载入、集体保存、增删改查服务</td>
</table>

#### 5.4.2 数据层模块的接口规范

<table border=3>
  <caption align="center" >数据层模块(CategoryDataService)的接口规范</caption>
  <th align="center" colspan=3>提供的服务（供接口）</th><tr>

  <td rowspan=3>CategoryDataService.generateId</td>
  <td>语法</td>
  <td>public String generateId() throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回一条与之前不同的商品分类编号</td><tr>

  <td rowspan=3>CategoryDataService.findByName</td>
  <td>语法</td>
  <td>public CategoryPO findByName(String name) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中该名称的PO记录存在</td><tr>
  <td>后置条件</td>
  <td>返回同名的PO记录</td><tr>

  <td rowspan=3>CategoryDataService.findById</td>
  <td>语法</td>
  <td>public CategoryPO findById(String id) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中该id的PO存在</td><tr>
  <td>后置条件</td>
  <td>返回该ID的PO记录</td><tr>

  <td rowspan=3>CategoryDataService.add</td>
  <td>语法</td>
  <td>public void add(CategoryPO cpo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中不存在相同编号的PO记录</td><tr>
  <td>后置条件</td>
  <td>在数据库中增加一条PO记录</td><tr>

  <td rowspan=3>CategoryDataService.delete</td>
  <td>语法</td>
  <td>public void delete(CategoryPO cpo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>在数据库中删除对应的PO记录</td><tr>

  <td rowspan=3>CategoryDataService.multiplyDelete</td>
  <td>语法</td>
  <td>public void delete(List<CategoryPO> cpos) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>在数据库中删除对应的PO记录</td><tr>

  <td rowspan=3>CategoryDataService.modify</td>
  <td>语法</td>
  <td>public void modify(CategoryPO cpo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中存在同样编号的PO记录</td><tr>
  <td>后置条件</td>
  <td>在数据库中更新该PO记录</td><tr>

</table>

<table border=3>
  <caption align="center" >数据层模块(CommodityDataService)的接口规范</caption>
  <th align="center" colspan=3>提供的服务（供接口）</th><tr>

  <td rowspan=3>CommodityDataService.generateId</td>
  <td>语法</td>
  <td>public String generateId() throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回一条与之前不同的商品分类编号</td><tr>

  <td rowspan=3>CommodityDataService.add</td>
  <td>语法</td>
  <td>public void add(CommodityPO cpo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中不存在同样编号的PO记录</td><tr>
  <td>后置条件</td>
  <td>在数据库中添加一条PO记录</td><tr>

  <td rowspan=3>CommodityDataService.delete</td>
  <td>语法</td>
  <td>public void delete(CommodityPO cpo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>在数据库中删除一条相应的PO记录</td><tr>

  <td rowspan=3>CommodityDataService.multiplyDelete</td>
  <td>语法</td>
  <td>public void delete(List<CommodityPO> cpos) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>在数据库中删除相应的PO记录</td><tr>

  <td rowspan=3>CommodityDataService.modify</td>
  <td>语法</td>
  <td>public void modify(CommodityPO cpo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中存在同样编号的PO记录</td><tr>
  <td>后置条件</td>
  <td>在数据库中更新该PO记录</td><tr>

  <td rowspan=3>CommodityDataService.findById</td>
  <td>语法</td>
  <td>public CommodityPO findById(String id) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中存在该ID的PO记录</td><tr>
  <td>后置条件</td>
  <td>将对应的PO记录返回</td><tr>

  <td rowspan=3>CommodityDataService.findByName</td>
  <td>语法</td>
  <td>public List<CommodityPO> findByName(String name) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回数据库中所有合适的CommodityPO记录</td><tr>

</table>

<table border=3>
  <caption align="center" >数据层模块(AccountDataService)的接口规范</caption>
  <th align="center" colspan=3>提供的服务（供接口）</th><tr>

  <td rowspan=3>AccountDataService.generateId</td>
  <td>语法</td>
  <td>public String generateId() throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回一条与之前不同的商品分类编号</td><tr>

  <td rowspan=3>AccountDataService.findById</td>
  <td>语法</td>
  <td>public AccountPO findById(String id) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中存在一条相同ID的PO记录</td><tr>
  <td>后置条件</td>
  <td>返回对应的PO记录</td><tr>

  <td rowspan=3>AccountDataService.findByName</td>
  <td>语法</td>
  <td>public List<AccountPO> findByName(String name) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回数据库中所有符合条件的PO记录</td><tr>

  <td rowspan=3>AccountDataService.add</td>
  <td>语法</td>
  <td>public void add(AccountPO apo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中不存在相同的PO记录</td><tr>
  <td>后置条件</td>
  <td>在数据库中添加一条相应的PO记录</td><tr>

  <td rowspan=3>AccountDataService.delete</td>
  <td>语法</td>
  <td>public void delete(AccountPO apo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>在数据库中删除相应的一条PO记录</td><tr>

  <td rowspan=3>AccountDataService.multiplyDelete</td>
  <td>语法</td>
  <td>public void delete(List<AccountPO> apos) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>在数据库中删除相应的PO记录</td><tr>

  <td rowspan=3>AccountDataService.modify</td>
  <td>语法</td>
  <td>public void modify(AccountPO apo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中存在相应的PO记录</td><tr>
  <td>后置条件</td>
  <td>在数据库中修改相应的PO记录</td><tr>

</table>

<table border=3>
  <caption align="center" >数据层模块(CustomerDataService)的接口规范</caption>
  <th align="center" colspan=3>提供的服务（供接口）</th><tr>

  <td rowspan=3>CustomerDataService.generateId</td>
  <td>语法</td>
  <td>public String generateId() throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回一条与之前不同的商品分类编号</td><tr>

  <td rowspan=3>CustomerDataService.findById</td>
  <td>语法</td>
  <td>public CustomerPO findById(String id) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中存在该ID对应的PO记录</td><tr>
  <td>后置条件</td>
  <td>返回对应的PO记录</td><tr>

  <td rowspan=3>CustomerDataService.findByKeyWord</td>
  <td>语法</td>
  <td>public List<CustomerPO> findByKeyWord(String keyWord) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回所有符合条件的PO记录</td><tr>

  <td rowspan=3>CustomerDataService.add</td>
  <td>语法</td>
  <td>public void add(CustomerPO cpo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中不存在同样编号的PO记录</td><tr>
  <td>后置条件</td>
  <td>在数据库中添加一条相应的PO记录</td><tr>

  <td rowspan=3>CustomerDataService.delete</td>
  <td>语法</td>
  <td>public void delete(CustomerPO cpo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>在数据库中删除对应的PO记录</td><tr>

  <td rowspan=3>CustomerDataService.multiplyDelete</td>
  <td>语法</td>
  <td>public void delete(List<CustomerPO> cpos) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>在数据库中删除对应的PO记录</td><tr>

  <td rowspan=3>CustomerDataService.modify</td>
  <td>语法</td>
  <td>public void modify(CustomerPO cpo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中存在同样编号的PO记录</td><tr>
  <td>后置条件</td>
  <td>在数据库中更新对应的PO记录</td><tr>

</table>

<table border=3>
  <caption align="center" >数据层模块(BillDataService)的接口规范</caption>
  <th align="center" colspan=3>提供的服务（供接口）</th><tr>

  <td rowspan=3>BillDataService.generateId</td>
  <td>语法</td>
  <td>public String generateId(BillType type) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回一条与之前不同的商品分类编号</td><tr>

  <td rowspan=3>BillDataService.findById</td>
  <td>语法</td>
  <td>public BillPO findById(String id) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>根据单据的ID进行查找并返回BillPo结果</td><tr>

  <td rowspan=3>BillDataService.findByKeyWord</td>
  <td>语法</td>
  <td>public List<BillPO> findByKeyWord(String keyWord) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>根据单据的ID进行查找并返回所有符合关键字的BillPo结果</td><tr>

  <td rowspan=3>BillDataService.add</td>
  <td>语法</td>
  <td>public void add(BillPO bpo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中不存在同样的编号的PO</td><tr>
  <td>后置条件</td>
  <td>在数据库中增加一条PO记录</td><tr>

  <td rowspan=3>BillDataService.delete</td>
  <td>语法</td>
  <td>public void delete(BillPO bpo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>在数据库中删除一条PO记录</td><tr>

  <td rowspan=3>BillDataService.multiplyDelete</td>
  <td>语法</td>
  <td>public void delete(List<BillPO> bpos) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>在数据库中删除对应的PO记录</td><tr>

  <td rowspan=3>BillDataService.modify</td>
  <td>语法</td>
  <td>public void modify(BillPO bpo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中存在一条同样ID的PO记录</td><tr>
  <td>后置条件</td>
  <td>在数据库中更新一个PO记录</td><tr>

  <td rowspan=3>BillDataService.showNotPassed</td>
  <td>语法</td>
  <td>public List<BillPO> showNotPassed() throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回所有未被审核通过的BillPO记录</td><tr>

  <td rowspan=3>BillDataService.showPassed</td>
  <td>语法</td>
  <td>public List<BillPO> showPassed() throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回所有已被审核通过的BillPO记录</td><tr>

  <td rowspan=3>BillDataService.showAll</td>
  <td>语法</td>
  <td>public List<BillPO> showAll() throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回所有BillPO记录</td><tr>

  <td rowspan=3>BillDataService.showNotPassedByType</td>
  <td>语法</td>
  <td>public List<BillPO> showNotPassed(BillType type) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回所有对应种类的未通过审核的单据PO记录</td><tr>

  <td rowspan=3>BillDataService.showPassedByType</td>
  <td>语法</td>
  <td>public List<BillPO> showPassed(BillType type) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回所有该种类的通过审核的单据PO记录</td><tr>

  <td rowspan=3>BillDataService.showAllByType</td>
  <td>语法</td>
  <td>public List<BillPO> showAll(BillType type) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回所有该种类的单据PO记录</td><tr>

  <td rowspan=3>BillDataService.pass</td>
  <td>语法</td>
  <td>public void pass(BillPO bpo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中存在同样ID的PO记录</td><tr>
  <td>后置条件</td>
  <td>将该PO记录的状态更新为通过审核状态</td><tr>

  <td rowspan=3>BillDataService.multiplyPass</td>
  <td>语法</td>
  <td>public void pass(List<BillPO> bpos) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>list中的PO记录在数据库中均存在</td><tr>
  <td>后置条件</td>
  <td>将数据库中所有list中ID相同的PO记录的状态更新为通过审核状态</td><tr>

</table>

<table border=3>
  <caption align="center" >数据层模块(InitDataService)的接口规范</caption>
  <th align="center" colspan=3>提供的服务（供接口）</th><tr>

  <td rowspan=3>InitDataService.get</td>
  <td>语法</td>
  <td>public InitPO get(String year) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>year参数格式正确</td><tr>
  <td>后置条件</td>
  <td>返回对应年度的年初帐目</td><tr>

  <td rowspan=3>InitDataService.set</td>
  <td>语法</td>
  <td>public void set(InitPO ipo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>本年度没有对应的PO记录</td><tr>
  <td>后置条件</td>
  <td>在数据库中添加一个新的InitPO记录</td><tr>

  <td rowspan=3>InitDataService.getAuto</td>
  <td>语法</td>
  <td>public InitPO getAuto() throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>本年度没有对应的InitPO记录</td><tr>
  <td>后置条件</td>
  <td>返回由上期自动结转的账目PO记录</td><tr>

</table>

<table border=3>
  <caption align="center" >数据层模块(PromotionDataService)的接口规范</caption>
  <th align="center" colspan=3>提供的服务（供接口）</th><tr>

  <td rowspan=3>PromotionDataService.generateId</td>
  <td>语法</td>
  <td>public String generateId() throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回一条与之前不同的商品分类编号</td><tr>

  <td rowspan=3>PromotionDataService.add</td>
  <td>语法</td>
  <td>public void add(PromotionPO ppo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中不存在同样的PO记录</td><tr>
  <td>后置条件</td>
  <td>数据库中添加一条PO记录</td><tr>

  <td rowspan=3>PromotionDataService.showAll</td>
  <td>语法</td>
  <td>public List<PromotionPO> showAll() throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回数据库中所有促销PO记录</td><tr>

  <td rowspan=3>PromotionDataService.delete</td>
  <td>语法</td>
  <td>public void delete(PromotionPO ppo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>在数据库中删除对应的促销PO记录</td><tr>

  <td rowspan=3>PromotionDataService.multiplyDelete</td>
  <td>语法</td>
  <td>public void delete(List<PromotionPO> ppos) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>在数据库中删除对应的促销PO记录</td><tr>

</table>

<table border=3>
  <caption align="center" >数据层模块(UserDataService)的接口规范</caption>
  <th align="center" colspan=3>提供的服务（供接口）</th><tr>

  <td rowspan=3>UserDataService.generateId</td>
  <td>语法</td>
  <td>public String generateId() throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回一条与之前不同的商品分类编号</td><tr>

  <td rowspan=3>UserDataService.findById</td>
  <td>语法</td>
  <td>public UserPO findById(String id) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>该ID的用户在数据库中存在</td><tr>
  <td>后置条件</td>
  <td>返回对应的用户PO记录</td><tr>

  <td rowspan=3>UserDataService.findByKeyWord</td>
  <td>语法</td>
  <td>public List<UserPO> findByKeyWord(String keyWord) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回数据库中所有符合条件的用户PO记录</td><tr>

  <td rowspan=3>UserDataService.add</td>
  <td>语法</td>
  <td>public void add(UserPO upo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中没有同样的PO记录</td><tr>
  <td>后置条件</td>
  <td>在数据库中添加对应的一条PO记录</td><tr>

  <td rowspan=3>UserDataService.delete</td>
  <td>语法</td>
  <td>public void delete(UserPO upo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>在数据库中删除对应的PO记录</td><tr>

  <td rowspan=3>UserDataService.multiplyDelete</td>
  <td>语法</td>
  <td>public void delete(List<UserPO> upos) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>在数据库中删除对应的PO记录</td><tr>

  <td rowspan=3>UserDataService.modify</td>
  <td>语法</td>
  <td>public void modify(UserPO upo) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>数据库中存在编号相同的PO记录</td><tr>
  <td>后置条件</td>
  <td>在数据库中更新对应的PO记录</td><tr>

</table>

<table border=3>
  <caption align="center" >数据层模块(LogDataService)的接口规范</caption>
  <th align="center" colspan=3>提供的服务（供接口）</th><tr>

  <td rowspan=3>LogDataService.write</td>
  <td>语法</td>
  <td>public void write(List<LogPO> lpos) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>系统更新数据库中对应的日志PO记录</td><tr>

  <td rowspan=3>LogDataService.getByTime</td>
  <td>语法</td>
  <td>public List<LogPO> getByTime(String time) throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>time格式正确</td><tr>
  <td>后置条件</td>
  <td>返回对应时间段内的日志PO记录</td><tr>

  <td rowspan=3>LogDataService.getAll</td>
  <td>语法</td>
  <td>public List<LogPO> getAll() throws RemoteException</td><tr>
  <td>前置条件</td>
  <td>无</td><tr>
  <td>后置条件</td>
  <td>返回数据库中所有日志记录</td><tr>

</table>

### 6 信息视角
#### 6.1 数据持久化对象
系统的PO类就是对应的相关实体类，系统主要的PO类如下图所示。  
* CategoryPO类：商品分类PO类，包含父分类名称，商品分类名称，商品分类编号。  
* CommodityPO类：商品PO类，包含商品分类名称，商品名称，商品编号，型号，库存数量，进价，零售价，最近进价，最近零售价，警戒值。  
* CustomerPO类：客户信息PO类，包含客户姓名，客户编号，分类，级别，电话，地址，邮编，电子邮箱，应收额度，应收，应付，默认业务员。  
* AccountPO类：账户信息PO类，包含银行账号，账户名称，余额。  
* InitPO类：期初信息PO类，包含时间区间，商品信息，客户信息，银行账户信息。  
* UserPO类：用户信息PO类，包含用户姓名，用户权限，用户编号。  
* LogPO类：日志记录PO类，包含时间，操作员，操作记录。  
* Bill_ChangePO类：包含操作员，单据编号，商品，库存更改值。  
* Bill_PurchasePO类：包含操作员，单据编号，供应商，仓库，入库商品列表（包括商品编号，商品名称，型号，数量，单价，金额，备注），备注，总额合计。  
* Bill_SalePO类：包含操作员，单据编号，客户，业务员，仓库，出货商品列表（包括商品编号，商品名称，型号，数量，单价，金额，备注），折让前总额，折让，使用代金券金额，折让后总额，备注。  
* Bill_ReturnPO类：包含操作员，单据编号，客户，仓库，退货商品列表（包括商品编号，商品名称，型号，数量，单价，金额，备注），备注，应退金额总计。  
* Bill_PayOrReceivePO类：包含操作员，单据编号，客户，转账列表（银行账户，转账金额，备注），金额汇总。  
* Bill_CashPO类：包含操作员，单据编号，银行账户，条目清单（条目名，金额，备注），金额汇总。  
* Bill_GiftPO类：包含操作员，单据编号，仓库，赠送商品列表（包括商品编号，商品名称，型号，数量）。  

#### 6.2 Ser持久化对象
采用序列化存储方式，将数据存储在各个PO对应的.ser文件里  